import{o as p,c as v,a as e,u as O,i as R,b as d,w as f,d as m,t as u,e as b,R as F,f as W,g as G,F as P,r as w,h as T,n as L,j as N,k as J,v as Q,l as Y,m as Z,p as E,q as ee,s as te,x as ne,y as oe,z as ae}from"./vendor.js";const se=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerpolicy&&(a.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?a.credentials="include":t.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(t){if(t.ep)return;t.ep=!0;const a=n(t);fetch(t.href,a)}};se();var z=(s,r)=>{const n=s.__vccOpts||s;for(const[o,t]of r)n[o]=t;return n};const le={},re={width:"512",height:"512",version:"1.1",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},ie=e("path",{d:"m114.6 507.3c13.82-0.8729 90.06-3.083 106.2-3.079h13.49l2.639-5.293c5.191-10.41 10.35-29.57 13.13-48.74 1.811-12.5 1.488-16.68-1.826-23.56-2.528-5.249-11.04-13.06-20.54-18.86-28.38-17.32-51.21-34.77-76.05-58.12-6.673-6.272-9.377-8.209-16.08-11.53-12.37-6.124-20.36-12.88-29.19-24.7-1.45-1.941-1.795-2.038-4.695-1.334-1.722 0.4182-7.18 0.8166-12.13 0.8854-19.6 0.2722-38.18-7.715-52.49-22.56-15.97-16.57-23.43-35.49-23.41-59.37 0.01786-16.86 3.547-29.88 11.93-44 9.617-16.19 27.39-30.13 43.89-34.41 2.517-0.653 4.748-1.36 4.958-1.571 0.2103-0.2107-0.05169-3.078-0.5816-6.371-1.41-8.759-0.556-21.84 1.997-30.61 7.023-24.1 24.96-41.95 48.52-48.31 11.42-3.082 29.45-2.167 40.42 2.049 0.919 0.3533 1.637-0.7202 2.994-4.474 6.21-17.18 18.79-33.75 33.11-43.62 35.65-24.56 80.99-19.9 111.3 11.44l5.539 5.719 5.025-1.229c2.764-0.6762 9.075-1.428 14.02-1.672 16.17-0.7944 31.64 3.865 45.31 13.64l5.1 3.647 12.55 0.1171c9.984 0.09312 13.77 0.4491 18.49 1.739 29.1 7.945 50.37 32.58 56 64.86 1.354 7.764 1.096 21.6-0.5502 29.5l-0.916 4.394 5.367 7.086c20.1 26.54 25.52 61.05 14.68 93.52-7.862 23.55-24.99 43.53-46.38 54.11-10.16 5.023-23.1 8.587-31.28 8.613-3.79 0.0118-4.555 0.333-8.217 3.446-6.958 5.916-20.59 13.71-28.3 16.17-1.722 0.551-4.011 1.599-5.087 2.328-1.076 0.7297-8.119 4.802-15.65 9.05-18.57 10.47-37.53 22.69-48.72 31.39-13.27 10.32-16.83 22.63-14.72 50.94 2.648 35.64 8.059 59.41 16.33 71.75l2.89 4.313 29.4 0.4963c34.14 0.5764 92.53 2.291 93.01 2.731 0.1793 0.166-74.3 0.2503-165.5 0.1877-91.21-0.0631-161.4-0.392-156-0.732zm130.9-101.8c-0.1092-1.007-3.147-5.947-6.75-10.98-7.889-11.01-19.71-28.99-22.37-34.01-1.594-3.014-2.402-3.727-4.695-4.139-7.259-1.304-17.91-5.324-27.58-10.41-1.809-0.9509 5.669 20.15 9.032 25.49 4.859 7.714 27.69 24.94 45.08 34 5.177 2.7 7.575 2.715 7.285 0.0442zm6.168-19.46c0.8235-0.9976 1.074-4.638 1.074-15.62 0-7.875-0.1764-14.5-0.3923-14.71-0.2158-0.2163-2.307 0.1044-4.647 0.7128-2.34 0.6082-7 1.335-10.35 1.616-7.067 0.5907-6.896 0-2.984 10.28 2.73 7.17 6.328 12.81 10.4 16.3 3.513 3.013 5.293 3.38 6.908 1.424zm49.91-15.13c3.913-2 11.37-9.412 15.96-15.85 3.982-5.592 8.688-15 8.214-16.42-0.1628-0.49-3.275-1.75-6.916-2.799-3.641-1.049-9.568-3.501-13.17-5.449l-6.551-3.541-2.173 2.087c-2.148 2.062-2.179 2.234-2.645 14.37-0.2592 6.754-0.6282 15.17-0.8198 18.7-0.3026 5.572-0.1405 6.682 1.232 8.43 1.896 2.415 2.946 2.489 6.867 0.484zm-118.1-5.725c-2.19-4.729-6.256-17.66-6.256-19.89 0-0.8683-1.901-1.089-9.391-1.089-5.165 0-9.391 0.2195-9.391 0.488 0 1.561 25.33 25.39 26.99 25.39 0.1762 0-0.7011-2.206-1.949-4.901zm149.8-9.536c5.487-3.687 19.46-14.65 19.07-14.96-0.126-0.1032-4.197-0.3888-9.046-0.6338l-8.816-0.4452-3.967 5.891c-4.284 6.363-7.088 11.99-6.473 12.98 0.9066 1.47 4.434 0.3864 9.228-2.836z",fill:"#13ad73"},null,-1),ce=e("path",{d:"m253.9 167.7c-0.2579 0.0513-1.238 0.5454-4.691 0.5216-3.625-0.0248 4.941 9.227 6.934 34.4-8.031-0.4678-8.408-3.285-24.81-5.999-15.88-2.627-25.28 5.883-29.57 18.88-3.429 10.39-3.592 23.66-1.19 36.39 2.348 12.45 7.148 24.39 13.74 32.65 6.909 8.654 14.05 10.96 20.49 10.82 8.459-0.1842 15.7-4.599 19.58-4.407 6.726 0.3331 13.29 8.894 28.17 2.151 6.047-2.741 12.03-7.819 17.08-14.81 4.984-6.907 9.051-15.68 11.35-25.91 2.018-8.972 2.678-19.07 1.41-30-1.616-13.93-7.519-20.42-14.9-23.01-8.286-2.905-18.43-0.8896-26.46 1.032-4.71 1.127-8.69 2.223-11.14 2.273-0.155 3e-3 -0.2829-4.1e-4 -0.4335 2e-3 -0.01-0.0695-0.0197-0.1385-0.0323-0.2078-2.249-11.58-4.704-29.29-5.401-33.64-0.152-0.9486 0.0845-1.177-0.1162-1.137z",fill:"#f2ac05","fill-rule":"evenodd"},null,-1),ue=[ie,ce];function de(s,r){return p(),v("svg",re,ue)}var me=z(le,[["render",de]]);const _e={},he={width:"24",height:"24",version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},pe=e("path",{d:"m12 0c-6.624 0-12 5.376-12 12s5.376 12 12 12 12-5.376 12-12-5.376-12-12-12zm0 3.6c1.992 0 3.6 1.608 3.6 3.6s-1.608 3.6-3.6 3.6-3.6-1.608-3.6-3.6 1.608-3.6 3.6-3.6zm0 17.04c-3 0-5.652-1.536-7.2-3.864 0.036-2.388 4.8-3.696 7.2-3.696 2.388 0 7.164 1.308 7.2 3.696-1.548 2.328-4.2 3.864-7.2 3.864z"},null,-1),fe=[pe];function ve(s,r){return p(),v("svg",he,fe)}var ge=z(_e,[["render",ve]]);const $e={},ye={width:"24",height:"24",version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},be=e("path",{d:"m12 0-2.115 2.115 8.37 8.385h-18.255v3h18.255l-8.37 8.385 2.115 2.115 12-12z"},null,-1),we=[be];function ke(s,r){return p(),v("svg",ye,we)}var xe=z($e,[["render",ke]]);const Le=e("div",{id:"app-name"},[e("span",null,"Hey"),e("span",null,"Apple")],-1),Fe={id:"nav-main"},Ce={id:"nav-user"},Ee={href:"https://docs.heyapple.org",target:"_blank"},Me={setup(s){const{t:r}=O(),n=R("csrfToken");function o(a){a.preventDefault(),fetch("/auth/local",{method:"DELETE",headers:{"X-CSRF-Token":n}}).then(i=>{i.ok?window.location="/":window.dispatchEvent(new CustomEvent("error",{detail:{msg:r("signout.err"+i.status)}}))})}function t(a){a.stopPropagation(),document.querySelector("header nav").classList.toggle("open")}return document.addEventListener("click",function(){document.querySelector("header nav").classList.remove("open")}),(a,i)=>(p(),v("header",null,[d(me,{id:"logo"}),Le,e("nav",null,[e("button",{onClick:t},[d(xe)]),e("ul",Fe,[e("li",null,[d(b(F),{to:"/"},{default:f(()=>[m(u(a.$t("nav.food")),1)]),_:1})]),e("li",null,[d(b(F),{to:"/recipes"},{default:f(()=>[m(u(a.$t("nav.recipes")),1)]),_:1})]),e("li",null,[d(b(F),{to:"/diary"},{default:f(()=>[m(u(a.$t("nav.diary")),1)]),_:1})]),e("li",null,[d(b(F),{to:"/shopping"},{default:f(()=>[m(u(a.$t("nav.shopping")),1)]),_:1})])]),e("ul",Ce,[e("li",null,[d(b(F),{to:"/profile"},{default:f(()=>[m(u(a.$t("nav.profile")),1)]),_:1})]),e("li",null,[d(b(F),{to:"/settings"},{default:f(()=>[m(u(a.$t("nav.settings")),1)]),_:1})]),e("li",null,[e("a",Ee,u(a.$t("nav.help")),1)]),e("li",null,[e("a",{href:"#",onClick:o},u(a.$t("nav.signout")),1)])])]),e("button",{onClick:t},[d(ge)])]))}};const Ie={setup(s){return W(()=>{document.querySelector("body > .spinner-container").remove()}),(r,n)=>(p(),v(P,null,[d(Me),d(b(G))],64))}},ze={},Se={version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Te=e("path",{id:"path-top",d:"m0 3v2h24v-2z"},null,-1),De=e("path",{id:"path-mid",d:"m0 13h24v-2h-24z"},null,-1),Ae=e("path",{id:"path-bottom",d:"m0 21h24v-2h-24z"},null,-1),Be=[Te,De,Ae];function Ne(s,r){return p(),v("svg",Se,Be)}var Re=z(ze,[["render",Ne]]);const Ve={id:"filter"},qe=m(" This is the main search & filter area"),He={id:"main"},je={class:"controls"},Oe={class:"content"},Pe=m("This is the main area"),Xe={id:"details"},Ke=m("This is the details area"),M={setup(s){const r=w(""),n=w("");function o(){r.value==""?(r.value="open-filter",n.value=""):r.value=""}return(t,a)=>(p(),v("main",{class:L([r.value,n.value])},[e("div",Ve,[T(t.$slots,"filter",{},()=>[qe])]),e("div",He,[e("div",je,[e("button",{onClick:o,class:"open-close"},[d(Re)])]),e("div",Oe,[T(t.$slots,"main",{},()=>[Pe])])]),e("div",Xe,[T(t.$slots,"details",{},()=>[Ke])])],2))}},Ue=["placeholder"],We=m("Additional filters"),Ge={props:["data","placeholder"],emits:["result"],setup(s,{emit:r}){const n=s;var o=void 0;function t(i){i.preventDefault(),clearTimeout(o),o=setTimeout(function(){a(i.target.closest("form"))},500)}function a(i){let l=new FormData(i),g=n.data.filter(h=>{for(let $ of l.keys()){if($=="name"){let c=l.get($).toLowerCase();if(!h[$].toLowerCase().includes(c))return!1;continue}let[y,_]=l.getAll($).map(c=>parseFloat(c));if(!isNaN(y)&&!isNaN(_)&&(h[$]<y||_<h[$]))return!1}return!0});r("result",g)}return(i,l)=>(p(),v("form",null,[e("input",{type:"text",name:"name",placeholder:s.placeholder,onInput:t},null,40,Ue),T(i.$slots,"default",{confirm:t},()=>[We])]))}};const Je={class:"slider"},Qe=["name","value"],Ye=m(" \xA0\u2013\xA0 "),Ze=["name","value"],et={class:"bar"},tt={class:"slide"},nt=e("div",{class:"interact-area"},null,-1),ot=[nt],at=e("div",{class:"interact-area"},null,-1),st=[at],S={props:["label","name","unit","min","max","frac"],emits:["input"],setup(s,{emit:r}){const n=s,o=w(parseFloat(n.min).toFixed(n.frac)),t=w(parseFloat(n.max).toFixed(n.frac)),a=w(0),i=w(100);function l(_){_.target.blur();let c=parseFloat(n.min)||0,k=parseFloat(_.target.value)||c;o.value=k,t.value=Math.max(o.value,t.value);let x=parseFloat(n.max)||0;a.value=(k-c)*100/(x-c),i.value=Math.max(a.value,i.value),r("input",_)}function g(_){_.target.blur();let c=parseFloat(n.max)||0,k=parseFloat(_.target.value)||c;t.value=k,o.value=Math.min(o.value,t.value);let x=parseFloat(n.min)||0;i.value=(k-x)*100/(c-x),a.value=Math.min(a.value,i.value),r("input",_)}function h(_){let k=_.target.closest(".slide").getBoundingClientRect(),x=_.pageX!==void 0?_.pageX:_.changedTouches[0].pageX;x=Math.min(Math.max(x-k.left,0),k.width);let B=x*100/k.width,q=parseFloat(n.min)||0,U=parseFloat(n.max)||0,H=B/100*(U-q)+q;_.target.closest("button").classList.contains("min")?(o.value=H.toFixed(n.frac),t.value=Math.max(o.value,t.value),a.value=B,i.value=Math.max(a.value,i.value)):(t.value=H.toFixed(n.frac),o.value=Math.min(o.value,t.value),i.value=B,a.value=Math.min(a.value,i.value)),r("input",_)}function $(_){let c=_.target.closest("button");c.addEventListener("mousemove",h),c.addEventListener("touchmove",h),c.addEventListener("mouseup",y),c.addEventListener("touchend",y),c.addEventListener("mouseleave",y),c.addEventListener("touchcancel",y),c.classList.add("active")}function y(_){let c=_.target.closest("button");c.removeEventListener("mousemove",h),c.removeEventListener("touchmove",h),c.removeEventListener("mouseup",y),c.removeEventListener("touchend",y),c.removeEventListener("mouseleave",y),c.removeEventListener("touchcancel",y),c.classList.remove("active")}return(_,c)=>(p(),v("div",Je,[e("label",null,[e("span",null,u(s.label)+" ("+u(_.$t("unit."+s.unit))+")",1),e("input",{type:"text",name:s.name,value:o.value,onChange:l},null,40,Qe),Ye,e("input",{type:"text",name:s.name,value:t.value,onChange:g},null,40,Ze)]),e("div",et,[e("div",tt,[e("div",{class:"overlay",style:N({left:a.value+"%",right:100-i.value+"%"})},null,4),e("button",{type:"button",class:"handle min",style:N({left:a.value+"%"}),onMousedown:$,onTouchstart:$},ot,36),e("button",{type:"button",class:"handle max",style:N({left:i.value+"%"}),onMousedown:$,onTouchstart:$},st,36)])])]))}};const lt={class:"clickable-input"},rt=["placeholder"],it=["value"],X={props:["label","placeholder"],emits:["confirm"],setup(s,{emit:r}){const n=w("");function o(t){t.preventDefault(),r("confirm",n.value),n.value=""}return(t,a)=>(p(),v("form",lt,[J(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=i=>n.value=i),placeholder:s.placeholder},null,8,rt),[[Q,n.value]]),e("input",{type:"submit",onClick:o,value:s.label},null,8,it)]))}};const ct={},ut={class:"icon sort-arrow"};function dt(s,r){return p(),v("span",ut)}var I=z(ct,[["render",dt]]);const mt=["onClick"],_t={class:"name"},ht={class:"num"},pt={class:"unit"},ft={class:"m num"},vt={class:"unit"},gt={class:"m num"},$t={class:"unit"},yt={class:"m num"},bt={class:"unit"},wt={props:["items"],emits:"selected",setup(s,{emit:r}){const n=s,o=w("name"),t=w("asc"),a=Y(()=>t.value=="asc"?[...n.items].sort((l,g)=>l[o.value]<g[o.value]?-1:l[o.value]>g[o.value]?1:0):[...n.items].sort((l,g)=>l[o.value]>g[o.value]?-1:l[o.value]<g[o.value]?1:0));function i(l){let g=l.target.dataset.sort;o.value==g?t.value=t.value=="asc"?"desc":"asc":o.value=g}return(l,g)=>(p(),v("table",null,[e("thead",null,[e("tr",{class:L(t.value)},[e("th",{class:L(["name sort",{active:o.value=="name"}]),onClick:i,"data-sort":"name"},[m(u(l.$t("food.name"))+" ",1),d(I)],2),e("th",{class:L(["num sort",{active:o.value=="kcal"}]),onClick:i,"data-sort":"kcal"},[d(I),m(" "+u(l.$t("food.energy")),1)],2),e("th",{class:L(["m num sort",{active:o.value=="fat"}]),onClick:i,"data-sort":"fat"},[d(I),m(" "+u(l.$t("food.fat")),1)],2),e("th",{class:L(["m num sort",{active:o.value=="carb"}]),onClick:i,"data-sort":"carb"},[d(I),m(" "+u(l.$t("food.carbs2")),1)],2),e("th",{class:L(["m num sort",{active:o.value=="prot"}]),onClick:i,"data-sort":"prot"},[d(I),m(" "+u(l.$t("food.protein")),1)],2)],2)]),e("tbody",null,[(p(!0),v(P,null,Z(b(a),h=>(p(),v("tr",{key:h.id,onClick:$=>l.$emit("selected",h.id)},[e("td",_t,u(h.name),1),e("td",ht,[m(u(h.kcal)+" ",1),e("span",pt,u(l.$t("unit.cal")),1)]),e("td",ft,[m(u(h.fat)+" ",1),e("span",vt,u(l.$t("unit.g")),1)]),e("td",gt,[m(u(h.carb)+" ",1),e("span",$t,u(l.$t("unit.g")),1)]),e("td",yt,[m(u(h.prot)+" ",1),e("span",bt,u(l.$t("unit.g")),1)])],8,mt))),128))])]))}},kt={key:0},xt={setup(s){O();const r=R("perms"),n=R("food"),o=w([]);function t(l){console.log(l)}function a(l){o.value=l}function i(l){console.log(l)}return(l,g)=>(p(),E(M,null,{filter:f(()=>[b(r).canCreateFood?(p(),v("section",kt,[e("h2",null,u(l.$t("aria.headnew")),1),d(X,{label:l.$t("btn.new"),placeholder:l.$t("food.hintnew"),onConfirm:t},null,8,["label","placeholder"])])):ee("",!0),e("section",null,[e("h2",null,u(l.$t("aria.headsearch")),1),d(Ge,{data:b(n),placeholder:l.$t("food.hintsearch"),onResult:a},{default:f(h=>[d(S,{label:l.$t("food.energy"),onInput:h.confirm,name:"kcal",unit:"cal",min:"0",max:"900",frac:"0"},null,8,["label","onInput"]),d(S,{label:l.$t("food.fat"),onInput:h.confirm,name:"fat",unit:"g",min:"0",max:"100",frac:"0"},null,8,["label","onInput"]),d(S,{label:l.$t("food.carbs"),onInput:h.confirm,name:"carb",unit:"g",min:"0",max:"100",frac:"0"},null,8,["label","onInput"]),d(S,{label:l.$t("food.protein"),onInput:h.confirm,name:"prot",unit:"g",min:"0",max:"100",frac:"0"},null,8,["label","onInput"])]),_:1},8,["data","placeholder"])])]),main:f(()=>[d(wt,{items:o.value,onSelected:i},null,8,["items"])]),_:1}))}},Lt=m(" Recipes "),Ft={setup(s){function r(n){console.log(n)}return(n,o)=>(p(),E(M,null,{filter:f(()=>[e("section",null,[d(X,{label:n.$t("btn.new"),placeholder:n.$t("recipe.hintnew"),onConfirm:r},null,8,["label","placeholder"])])]),main:f(()=>[Lt]),_:1}))}},Ct=m(" Diary "),Et={setup(s){return(r,n)=>(p(),E(M,null,{main:f(()=>[Ct]),_:1}))}},Mt=m(" Shopping Lists "),It={setup(s){return(r,n)=>(p(),E(M,null,{main:f(()=>[Mt]),_:1}))}},zt=m(" Profile "),St={setup(s){return(r,n)=>(p(),E(M,null,{main:f(()=>[zt]),_:1}))}},Tt=m(" Settings "),Dt={setup(s){return(r,n)=>(p(),E(M,null,{main:f(()=>[Tt]),_:1}))}},At=te({history:ne(),routes:[{path:"/",name:"food",component:xt},{path:"/recipes",name:"recipes",component:Ft},{path:"/diary",name:"diary",component:Et},{path:"/shopping",name:"shopping",component:It},{path:"/profile",name:"profile",component:St},{path:"/settings",name:"settings",component:Dt}]});let V=document.documentElement.lang||navigator.language;!V&&navigator.languages!=null&&(V=navigator.languages[0]);const j=document.querySelector("meta[name='_csrf']"),Bt=j?j.content:"",Nt=function(){const s=document.documentElement.dataset.perm||1,r=65536,n=131072;function o(t){return(s&t)==t}return{canCreateFood:o(r),canEditFood:o(n)}}(),C=oe(Ie);let D,A;function Rt(s){D=ae({locale:V.split("-")[0],fallbackLocale:"en",messages:s}),A&&K()}function Vt(s){A=s,D&&K()}function K(){A.forEach(s=>{s.name=D.global.t(s.id.toString())}),C.provide("csrfToken",Bt),C.provide("perms",Nt),C.provide("food",A),C.use(At),C.use(D),C.mount("#app")}fetch("/app/l10n.json").then(s=>s.json()).then(Rt);fetch("api/v1/foods").then(s=>s.json()).then(Vt);
