import{o as g,c as v,a as e,t as o,b as m,u as $,R,F as T,r as B,n as D,d as O,e as S,i as C,f as h,g as y,h as M,j as F,w as I,v as z,k as f,l as b,m as k,p as U,q as N,s as E,x as j,y as q,z as A}from"./vendor.js";const X=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function c(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=c(n);fetch(n.href,l)}};X();var L=(s,a)=>{const c=s.__vccOpts||s;for(const[r,n]of a)c[r]=n;return c};const K={},W={href:"/terms",target:"_blank"},G={href:"/legal",target:"_blank"},J={href:"/privacy",target:"_blank"};function Q(s,a){return g(),v("footer",null,[e("nav",null,[e("span",null,o(s.$t("foot.copy")),1),e("a",W,o(s.$t("foot.terms")),1),e("a",G,o(s.$t("foot.legal")),1),e("a",J,o(s.$t("foot.privacy")),1)])])}var Y=L(K,[["render",Q]]);const Z={setup(s){return(a,c)=>(g(),v(T,null,[e("div",null,[e("main",null,[m($(R))])]),m(Y)],64))}};const x=["name","value"],V={props:["modelValue","name","withBar"],emits:["update:modelValue"],setup(s,{emit:a}){const c=["#e53935","#FB8C00","#FDD835","#7CB342","#00897B"],r=B({width:"0",background:"transparent"});function n(i){const t=i.target.value;a("update:modelValue",t),l(t)}function l(i){let t=zxcvbn(i).score;r.width=i.length>0?20+t*20+"%":"0%",r.background=c[t]}return(i,t)=>(g(),v("span",null,[e("input",{type:"password",name:s.name,value:s.modelValue,onInput:n},null,40,x),s.withBar?(g(),v("div",{key:0,class:"password-strength-bar",style:D($(r))},null,4)):O("",!0)]))}},ee={id:"app-name"},te=["value"],ne=f("."),ae={setup(s){const{t:a}=S(),c=/^[^@]+@[^@]+$/,r=C("csrfToken"),n=h(""),l=h({msg:"",level:""});function i(t){if(t.preventDefault(),n.value.search(c)==-1)return l.value={msg:a("login.errmail"),level:"err"},!1;fetch("/auth/local",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":r},body:new URLSearchParams(new FormData(t.target.closest("form")))}).then(d=>{d.ok?window.location="/app":l.value={msg:a("login.err"+d.status),level:"err"}})}return(t,d)=>{const u=y("HeaderImage"),p=y("Message");return g(),v(T,null,[e("header",null,[m(u,{id:"logo"}),e("div",ee,[e("span",null,o(t.$t("login.title1")),1),e("span",null,o(t.$t("login.title2")),1)])]),e("form",null,[m(p,M(F(l.value)),null,16),e("label",null,o(t.$t("form.email")),1),I(e("input",{type:"email",name:"email","onUpdate:modelValue":d[0]||(d[0]=_=>n.value=_)},null,512),[[z,n.value]]),e("label",null,[f(o(t.$t("form.pass"))+" ",1),m($(b),{to:"/reset"},{default:k(()=>[f(o(t.$t("form.reset")),1)]),_:1})]),m(V,{name:"pass"}),e("input",{type:"submit",value:t.$t("login.action"),onClick:i},null,8,te),e("p",null,[f(o(t.$t("login.signup"))+" ",1),m($(b),{to:"/signup"},{default:k(()=>[f(o(t.$t("register.action")),1)]),_:1}),ne])])],64)}}},le={id:"app-name"},se=["innerHTML"],oe=["value"],re=f("."),ue={setup(s){const{t:a}=S(),c=/^[^@]+@[^@]+$/,r=C("csrfToken"),n=h(""),l=h(""),i=h(""),t=h({msg:"",level:""});function d(u){if(u.preventDefault(),n.value.search(c)==-1)return t.value={msg:a("login.errmail"),level:"err"},!1;if(l.value==""||i.value=="")return t.value={msg:a("register.errpassempty"),level:"err"},!1;if(l.value!=i.value){t.value={msg:a("register.errpassmatch"),level:"err"};return}let p=n.value;fetch("/api/v1/user",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":r},body:new URLSearchParams(new FormData(u.target.closest("form")))}).then(_=>{_.ok?t.value={msg:a("register.success",{addr:p})}:t.value={msg:a("register.err"+_.status),level:"err"}})}return(u,p)=>{const _=y("HeaderImage"),P=y("Message");return g(),v(T,null,[e("header",null,[m(_,{id:"logo"}),e("div",le,[e("span",null,o(u.$t("register.title1")),1),e("span",null,o(u.$t("register.title2")),1)])]),e("form",null,[m(P,M(F(t.value)),null,16),e("p",{innerHTML:u.$t("register.hint")},null,8,se),e("label",null,o(u.$t("form.email")),1),I(e("input",{type:"email",name:"email","onUpdate:modelValue":p[0]||(p[0]=w=>n.value=w)},null,512),[[z,n.value]]),e("label",null,o(u.$t("form.pass")),1),m(V,{name:"pass",withBar:"true",modelValue:l.value,"onUpdate:modelValue":p[1]||(p[1]=w=>l.value=w)},null,8,["modelValue"]),e("label",null,o(u.$t("form.confirm")),1),m(V,{name:"pass",modelValue:i.value,"onUpdate:modelValue":p[2]||(p[2]=w=>i.value=w)},null,8,["modelValue"]),e("input",{type:"submit",value:u.$t("register.action"),onClick:d},null,8,oe),e("p",null,[f(o(u.$t("register.signin"))+" ",1),m($(b),{to:"/"},{default:k(()=>[f(o(u.$t("login.action")),1)]),_:1}),re])])],64)}}};const ie={id:"app-name"},ce=["value"],me={setup(s){const{t:a}=S(),c=/^[^@]+@[^@]+$/,r=C("csrfToken"),n=h(""),l=h({msg:"",level:""});function i(t){if(t.preventDefault(),n.value.search(c)==-1)return l.value={msg:a("login.errmail"),level:"err"},!1;let d=n.value;fetch("/auth/reset",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":r},body:new URLSearchParams(new FormData(t.target.closest("form")))}).then(u=>{u.ok?l.value={msg:a("reset.success",{addr:d})}:l.value={msg:a("reset.err"+u.status),level:"err"}})}return(t,d)=>{const u=y("HeaderImage"),p=y("Message");return g(),v(T,null,[m($(b),{to:"/",class:"back"},{default:k(()=>[f("\u1438 "+o(t.$t("form.back")),1)]),_:1}),e("header",null,[m(u,{id:"logo"}),e("div",ie,[e("span",null,o(t.$t("reset.title1")),1),e("span",null,o(t.$t("reset.title2")),1)])]),e("form",null,[m(p,M(F(l.value)),null,16),e("p",null,o(t.$t("reset.hint")),1),e("label",null,o(t.$t("form.email")),1),I(e("input",{type:"email",name:"email","onUpdate:modelValue":d[0]||(d[0]=_=>n.value=_)},null,512),[[z,n.value]]),e("input",{type:"submit",value:t.$t("reset.action"),onClick:i},null,8,ce)])],64)}}},de=U({history:N(),routes:[{path:"/",name:"login",component:ae},{path:"/signup",name:"signup",component:ue},{path:"/reset",name:"reset",component:me}]});const pe={props:{msg:String,level:String},setup(s){const a=s,c=E(()=>a.msg);return(r,n)=>(g(),v("div",{class:j(["message",[{hidden:!$(c)},s.level]])},o(s.msg),3))}},fe={},ge={width:"512",height:"512",version:"1.1",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},ve=e("path",{d:"m251.2 4.007c-17.24-0.2277-34.69 4.924-50.29 15.67-14.33 9.866-26.9 26.43-33.11 43.62-1.357 3.754-2.073 4.828-2.992 4.475-10.97-4.217-29-5.131-40.42-2.049-23.57 6.359-41.5 24.22-48.52 48.31-2.553 8.761-3.407 21.84-1.997 30.6 0.5299 3.293 0.7902 6.162 0.5799 6.372-0.2104 0.2108-2.439 0.9186-4.956 1.572-16.5 4.283-34.28 18.21-43.89 34.41-8.382 14.11-11.91 27.14-11.93 44-0.02401 23.88 7.433 42.79 23.41 59.36 14.31 14.85 32.89 22.84 52.49 22.56 4.95-0.0689 10.41-0.4681 12.13-0.8863 2.9-0.7045 3.245-0.6061 4.695 1.334 8.833 11.82 16.82 18.58 29.19 24.7 6.707 3.32 9.412 5.257 16.09 11.53 24.85 23.35 47.68 40.8 76.05 58.12 9.503 5.8 18.01 13.61 20.54 18.86 3.313 6.878 3.637 11.06 1.825 23.56-2.778 19.18-7.936 38.33-13.13 48.74l-2.639 5.295h-13.49c-16.17-3e-3 -92.41 2.205-106.2 3.077l0.01-3e-3c-5.381 0.3399 64.84 0.6684 156 0.7315 91.2 0.0625 165.7-0.0216 165.5-0.1878-0.4753-0.4399-58.86-2.155-93-2.731l-29.4-0.4942-2.89-4.313c-8.274-12.35-13.68-36.12-16.33-71.76-2.105-28.31 1.454-40.62 14.72-50.94 11.18-8.699 30.14-20.92 48.72-31.39 7.533-4.248 14.57-8.318 15.65-9.048 1.076-0.7296 3.366-1.779 5.087-2.33 7.71-2.467 21.34-10.26 28.3-16.17 3.662-3.113 4.427-3.435 8.218-3.446 8.183-0.0267 21.12-3.59 31.28-8.613 21.39-10.58 38.52-30.56 46.38-54.11 10.84-32.47 5.42-66.98-14.68-93.52l-5.364-7.084 0.916-4.395c1.646-7.896 1.904-21.74 0.5502-29.5-5.632-32.29-26.9-56.92-56-64.86-4.726-1.29-8.51-1.647-18.49-1.74l-12.55-0.1186-5.101-3.647c-13.67-9.776-29.15-14.43-45.31-13.64-4.95 0.2432-11.26 0.9944-14.02 1.671l-5.028 1.229-5.539-5.72c-17.07-17.63-38.89-26.81-61.05-27.1zm2.728 163.7c0.2008-0.0398-0.0367 0.1881 0.1154 1.137 0.6972 4.35 3.151 22.06 5.4 33.64 0.0118 0.0694 0.0228 0.138 0.0328 0.2076 0.1506-2e-3 0.2799 9e-5 0.4349-3e-3 2.448-0.0501 6.427-1.143 11.14-2.27 8.028-1.922 18.18-3.94 26.46-1.035 7.379 2.587 13.28 9.078 14.9 23.01 1.268 10.94 0.6106 21.03-1.407 30-2.301 10.23-6.37 19.01-11.35 25.91-5.045 6.991-11.03 12.07-17.07 14.81-14.87 6.743-21.44-1.818-28.16-2.152-3.88-0.1922-11.12 4.224-19.58 4.409-6.437 0.1402-13.58-2.169-20.49-10.82-6.596-8.262-11.39-20.2-13.74-32.65-2.402-12.73-2.24-26 1.189-36.39 4.29-13 13.69-21.51 29.58-18.88 16.41 2.714 16.78 5.532 24.81 6-1.993-25.18-10.56-34.43-6.936-34.4 3.453 0.0238 4.434-0.4726 4.692-0.5239zm45.16 159.1 6.55 3.542c3.603 1.947 9.529 4.401 13.17 5.45 3.641 1.049 6.753 2.307 6.916 2.797 0.4733 1.423-4.232 10.83-8.214 16.42-4.588 6.442-12.05 13.85-15.96 15.86-3.919 2.004-4.971 1.93-6.867-0.4843-1.372-1.748-1.532-2.86-1.229-8.432 0.1916-3.529 0.558-11.94 0.8171-18.7 0.4657-12.13 0.4983-12.3 2.646-14.37zm35.38 12.77 8.817 0.4448c4.849 0.245 8.919 0.5294 9.045 0.6326 0.3835 0.315-13.58 11.27-19.07 14.96-4.795 3.222-8.322 4.307-9.229 2.837-0.6151-0.9971 2.187-6.619 6.471-12.98zm-166.7 4.596c7.489 0 9.391 0.219 9.391 1.087 0 2.234 4.067 15.16 6.257 19.89 1.248 2.694 2.123 4.9 1.947 4.9-1.66 0-26.99-23.83-26.99-25.39 0-0.2685 4.226-0.4876 9.391-0.4876zm16.13 1.727c0.0388-0.0118 0.0851-6e-3 0.1417 0.0231 9.674 5.087 20.32 9.107 27.58 10.41 2.293 0.4121 3.101 1.124 4.695 4.138 2.657 5.026 14.48 23 22.37 34.02 3.603 5.03 6.639 9.968 6.748 10.98 0.2897 2.671-2.108 2.658-7.285-0.0429-17.39-9.068-40.22-26.29-45.07-34.01-3.258-5.172-10.38-25.14-9.173-25.52zm67.9 9.71c0.263-9e-3 0.4337 9e-3 0.4876 0.0625 0.2159 0.2154 0.3921 6.837 0.3921 14.71 0 10.98-0.2506 14.62-1.074 15.62-1.615 1.956-3.397 1.59-6.909-1.423-4.068-3.49-7.665-9.13-10.4-16.3-3.912-10.28-4.082-9.686 2.985-10.28 3.355-0.2804 8.013-1.006 10.35-1.615 1.755-0.4562 3.373-0.7502 4.162-0.7776z",fill:"#13ad73"},null,-1),_e=[ve];function he(s,a){return g(),v("svg",ge,_e)}var $e=L(fe,[["render",he]]);const H=document.querySelector("meta[name='_csrf']"),ye=H?H.content:"";fetch("/login/l10n.json").then(s=>s.json()).then(s=>{let a=navigator.language;navigator.languages!=null&&(a=navigator.languages[0]);const c=q({locale:a.split("-")[0],fallbackLocale:"en",messages:s}),r=A(Z);r.component("Message",pe),r.component("HeaderImage",$e),r.provide("csrfToken",ye),r.use(de),r.use(c),r.mount("#app")});
