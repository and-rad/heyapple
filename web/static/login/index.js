import{o as f,c as v,a as e,t as s,b as d,u as y,R as B,F as V,r as D,n as O,d as U,e as C,i as F,f as h,g as b,h as M,j as I,w as z,v as H,k as g,l as k,m as T,p as N,q as E,s as j,x as q,y as A,z as X}from"./vendor.js";const K=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&u(c)}).observe(document,{childList:!0,subtree:!0});function m(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerpolicy&&(l.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?l.credentials="include":t.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function u(t){if(t.ep)return;t.ep=!0;const l=m(t);fetch(t.href,l)}};K();var P=(r,n)=>{const m=r.__vccOpts||r;for(const[u,t]of n)m[u]=t;return m};const W={},G={href:"/terms",target:"_blank"},J={href:"/legal",target:"_blank"},Q={href:"/privacy",target:"_blank"};function Y(r,n){return f(),v("footer",null,[e("nav",null,[e("span",null,s(r.$t("foot.copy")),1),e("a",G,s(r.$t("foot.terms")),1),e("a",J,s(r.$t("foot.legal")),1),e("a",Q,s(r.$t("foot.privacy")),1)])])}var Z=P(W,[["render",Y]]);const x={setup(r){return(n,m)=>(f(),v(V,null,[e("div",null,[e("main",null,[d(y(B))])]),d(Z)],64))}};const ee=["name","value"],S={props:["modelValue","name","withBar"],emits:["update:modelValue"],setup(r,{emit:n}){const m=["#e53935","#FB8C00","#FDD835","#7CB342","#00897B"],u=D({width:"0",background:"transparent"});function t(c){const a=c.target.value;n("update:modelValue",a),l(a)}function l(c){let a=zxcvbn(c).score;u.width=c.length>0?20+a*20+"%":"0%",u.background=m[a]}return(c,a)=>(f(),v("span",null,[e("input",{type:"password",name:r.name,value:r.modelValue,onInput:t},null,40,ee),r.withBar?(f(),v("div",{key:0,class:"password-strength-bar",style:O(y(u))},null,4)):U("",!0)]))}},te={id:"app-name"},ae=g("."),ne={setup(r){const{t:n}=C(),m=/^[^@]+@[^@]+$/,u=F("csrfToken"),t=h(""),l=h({msg:"",level:""});function c(a){if(a.preventDefault(),t.value.search(m)==-1)return l.value={msg:n("login.errmail"),level:"err"},!1;a.target.disabled=!0,fetch("/auth/local",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":u},body:new URLSearchParams(new FormData(a.target.closest("form")))}).then(i=>{i.ok?window.location="/app":(l.value={msg:n("login.err"+i.status),level:"err"},a.target.disabled=!1)})}return(a,i)=>{const _=b("HeaderImage"),o=b("Message");return f(),v(V,null,[e("header",null,[d(_,{id:"logo"}),e("div",te,[e("span",null,s(a.$t("login.title1")),1),e("span",null,s(a.$t("login.title2")),1)])]),e("form",null,[d(o,M(I(l.value)),null,16),e("label",null,s(a.$t("form.email")),1),z(e("input",{type:"email",name:"email","onUpdate:modelValue":i[0]||(i[0]=p=>t.value=p)},null,512),[[H,t.value]]),e("label",null,[g(s(a.$t("form.pass"))+" ",1),d(y(k),{to:"/reset"},{default:T(()=>[g(s(a.$t("form.reset")),1)]),_:1})]),d(S,{name:"pass"}),e("button",{type:"submit",onClick:c,class:"async"},s(a.$t("login.action")),1),e("p",null,[g(s(a.$t("login.signup"))+" ",1),d(y(k),{to:"/signup"},{default:T(()=>[g(s(a.$t("register.action")),1)]),_:1}),ae])])],64)}}},le={id:"app-name"},se=["innerHTML"],re=g("."),oe={setup(r){const{t:n}=C(),m=/^[^@]+@[^@]+$/,u=F("csrfToken"),t=h(""),l=h(""),c=h(""),a=h({msg:"",level:""});function i(o){if(o.preventDefault(),t.value.search(m)==-1)return a.value={msg:n("login.errmail"),level:"err"},!1;if(l.value==""||c.value=="")return a.value={msg:n("register.errpassempty"),level:"err"},!1;if(l.value!=c.value){a.value={msg:n("register.errpassmatch"),level:"err"};return}let p=t.value;o.target.disabled=!0,fetch("/api/v1/user",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":u},body:new URLSearchParams(new FormData(o.target.closest("form")))}).then($=>{$.ok?(a.value={msg:n("register.success",{addr:p})},_(o)):(a.value={msg:n("register.err"+$.status),level:"err"},o.target.disabled=!1)})}function _(o){o.target.disabled=!1,t.value="",l.value="",c.value=""}return(o,p)=>{const $=b("HeaderImage"),R=b("Message");return f(),v(V,null,[e("header",null,[d($,{id:"logo"}),e("div",le,[e("span",null,s(o.$t("register.title1")),1),e("span",null,s(o.$t("register.title2")),1)])]),e("form",null,[e("p",{innerHTML:o.$t("register.hint")},null,8,se),d(R,M(I(a.value)),null,16),e("label",null,s(o.$t("form.email")),1),z(e("input",{type:"email",name:"email","onUpdate:modelValue":p[0]||(p[0]=w=>t.value=w)},null,512),[[H,t.value]]),e("label",null,s(o.$t("form.pass")),1),d(S,{name:"pass",withBar:"true",modelValue:l.value,"onUpdate:modelValue":p[1]||(p[1]=w=>l.value=w)},null,8,["modelValue"]),e("label",null,s(o.$t("form.confirm")),1),d(S,{name:"pass",modelValue:c.value,"onUpdate:modelValue":p[2]||(p[2]=w=>c.value=w)},null,8,["modelValue"]),e("button",{type:"submit",onClick:i,class:"async"},s(o.$t("register.action")),1),e("p",null,[g(s(o.$t("register.signin"))+" ",1),d(y(k),{to:"/"},{default:T(()=>[g(s(o.$t("login.action")),1)]),_:1}),re])])],64)}}};const ue={id:"app-name"},ie={setup(r){const{t:n}=C(),m=/^[^@]+@[^@]+$/,u=F("csrfToken"),t=h(""),l=h({msg:"",level:""});function c(i){if(i.preventDefault(),t.value.search(m)==-1)return l.value={msg:n("login.errmail"),level:"err"},!1;let _=t.value;i.target.disabled=!0,fetch("/auth/reset",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":u},body:new URLSearchParams(new FormData(i.target.closest("form")))}).then(o=>{o.ok?(l.value={msg:n("reset.success",{addr:_})},a(i)):(l.value={msg:n("reset.err"+o.status),level:"err"},i.target.disabled=!1)})}function a(i){i.target.disabled=!1,t.value=""}return(i,_)=>{const o=b("HeaderImage"),p=b("Message");return f(),v(V,null,[d(y(k),{to:"/",class:"back"},{default:T(()=>[g("\u1438 "+s(i.$t("form.back")),1)]),_:1}),e("header",null,[d(o,{id:"logo"}),e("div",ue,[e("span",null,s(i.$t("reset.title1")),1),e("span",null,s(i.$t("reset.title2")),1)])]),e("form",null,[e("p",null,s(i.$t("reset.hint")),1),d(p,M(I(l.value)),null,16),e("label",null,s(i.$t("form.email")),1),z(e("input",{type:"email",name:"email","onUpdate:modelValue":_[0]||(_[0]=$=>t.value=$)},null,512),[[H,t.value]]),e("button",{type:"submit",onClick:c,class:"async"},s(i.$t("reset.action")),1)])],64)}}},ce=N({history:E(),routes:[{path:"/",name:"login",component:ne},{path:"/signup",name:"signup",component:oe},{path:"/reset",name:"reset",component:ie}]});const me={props:{msg:String,level:String},setup(r){const n=r,m=j(()=>n.msg);return(u,t)=>(f(),v("div",{class:q(["message",[{hidden:!y(m)},r.level]])},s(r.msg),3))}},de={},pe={width:"512",height:"512",version:"1.1",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},ge=e("path",{d:"m251.2 4.007c-17.24-0.2277-34.69 4.924-50.29 15.67-14.33 9.866-26.9 26.43-33.11 43.62-1.357 3.754-2.073 4.828-2.992 4.475-10.97-4.217-29-5.131-40.42-2.049-23.57 6.359-41.5 24.22-48.52 48.31-2.553 8.761-3.407 21.84-1.997 30.6 0.5299 3.293 0.7902 6.162 0.5799 6.372-0.2104 0.2108-2.439 0.9186-4.956 1.572-16.5 4.283-34.28 18.21-43.89 34.41-8.382 14.11-11.91 27.14-11.93 44-0.02401 23.88 7.433 42.79 23.41 59.36 14.31 14.85 32.89 22.84 52.49 22.56 4.95-0.0689 10.41-0.4681 12.13-0.8863 2.9-0.7045 3.245-0.6061 4.695 1.334 8.833 11.82 16.82 18.58 29.19 24.7 6.707 3.32 9.412 5.257 16.09 11.53 24.85 23.35 47.68 40.8 76.05 58.12 9.503 5.8 18.01 13.61 20.54 18.86 3.313 6.878 3.637 11.06 1.825 23.56-2.778 19.18-7.936 38.33-13.13 48.74l-2.639 5.295h-13.49c-16.17-3e-3 -92.41 2.205-106.2 3.077l0.01-3e-3c-5.381 0.3399 64.84 0.6684 156 0.7315 91.2 0.0625 165.7-0.0216 165.5-0.1878-0.4753-0.4399-58.86-2.155-93-2.731l-29.4-0.4942-2.89-4.313c-8.274-12.35-13.68-36.12-16.33-71.76-2.105-28.31 1.454-40.62 14.72-50.94 11.18-8.699 30.14-20.92 48.72-31.39 7.533-4.248 14.57-8.318 15.65-9.048 1.076-0.7296 3.366-1.779 5.087-2.33 7.71-2.467 21.34-10.26 28.3-16.17 3.662-3.113 4.427-3.435 8.218-3.446 8.183-0.0267 21.12-3.59 31.28-8.613 21.39-10.58 38.52-30.56 46.38-54.11 10.84-32.47 5.42-66.98-14.68-93.52l-5.364-7.084 0.916-4.395c1.646-7.896 1.904-21.74 0.5502-29.5-5.632-32.29-26.9-56.92-56-64.86-4.726-1.29-8.51-1.647-18.49-1.74l-12.55-0.1186-5.101-3.647c-13.67-9.776-29.15-14.43-45.31-13.64-4.95 0.2432-11.26 0.9944-14.02 1.671l-5.028 1.229-5.539-5.72c-17.07-17.63-38.89-26.81-61.05-27.1zm2.728 163.7c0.2008-0.0398-0.0367 0.1881 0.1154 1.137 0.6972 4.35 3.151 22.06 5.4 33.64 0.0118 0.0694 0.0228 0.138 0.0328 0.2076 0.1506-2e-3 0.2799 9e-5 0.4349-3e-3 2.448-0.0501 6.427-1.143 11.14-2.27 8.028-1.922 18.18-3.94 26.46-1.035 7.379 2.587 13.28 9.078 14.9 23.01 1.268 10.94 0.6106 21.03-1.407 30-2.301 10.23-6.37 19.01-11.35 25.91-5.045 6.991-11.03 12.07-17.07 14.81-14.87 6.743-21.44-1.818-28.16-2.152-3.88-0.1922-11.12 4.224-19.58 4.409-6.437 0.1402-13.58-2.169-20.49-10.82-6.596-8.262-11.39-20.2-13.74-32.65-2.402-12.73-2.24-26 1.189-36.39 4.29-13 13.69-21.51 29.58-18.88 16.41 2.714 16.78 5.532 24.81 6-1.993-25.18-10.56-34.43-6.936-34.4 3.453 0.0238 4.434-0.4726 4.692-0.5239zm45.16 159.1 6.55 3.542c3.603 1.947 9.529 4.401 13.17 5.45 3.641 1.049 6.753 2.307 6.916 2.797 0.4733 1.423-4.232 10.83-8.214 16.42-4.588 6.442-12.05 13.85-15.96 15.86-3.919 2.004-4.971 1.93-6.867-0.4843-1.372-1.748-1.532-2.86-1.229-8.432 0.1916-3.529 0.558-11.94 0.8171-18.7 0.4657-12.13 0.4983-12.3 2.646-14.37zm35.38 12.77 8.817 0.4448c4.849 0.245 8.919 0.5294 9.045 0.6326 0.3835 0.315-13.58 11.27-19.07 14.96-4.795 3.222-8.322 4.307-9.229 2.837-0.6151-0.9971 2.187-6.619 6.471-12.98zm-166.7 4.596c7.489 0 9.391 0.219 9.391 1.087 0 2.234 4.067 15.16 6.257 19.89 1.248 2.694 2.123 4.9 1.947 4.9-1.66 0-26.99-23.83-26.99-25.39 0-0.2685 4.226-0.4876 9.391-0.4876zm16.13 1.727c0.0388-0.0118 0.0851-6e-3 0.1417 0.0231 9.674 5.087 20.32 9.107 27.58 10.41 2.293 0.4121 3.101 1.124 4.695 4.138 2.657 5.026 14.48 23 22.37 34.02 3.603 5.03 6.639 9.968 6.748 10.98 0.2897 2.671-2.108 2.658-7.285-0.0429-17.39-9.068-40.22-26.29-45.07-34.01-3.258-5.172-10.38-25.14-9.173-25.52zm67.9 9.71c0.263-9e-3 0.4337 9e-3 0.4876 0.0625 0.2159 0.2154 0.3921 6.837 0.3921 14.71 0 10.98-0.2506 14.62-1.074 15.62-1.615 1.956-3.397 1.59-6.909-1.423-4.068-3.49-7.665-9.13-10.4-16.3-3.912-10.28-4.082-9.686 2.985-10.28 3.355-0.2804 8.013-1.006 10.35-1.615 1.755-0.4562 3.373-0.7502 4.162-0.7776z",fill:"#13ad73"},null,-1),fe=[ge];function ve(r,n){return f(),v("svg",pe,fe)}var _e=P(de,[["render",ve]]);const L=document.querySelector("meta[name='_csrf']"),he=L?L.content:"";fetch("/login/l10n.json").then(r=>r.json()).then(r=>{let n=navigator.language;navigator.languages!=null&&(n=navigator.languages[0]);const m=A({locale:n.split("-")[0],fallbackLocale:"en",messages:r}),u=X(x);u.component("Message",me),u.component("HeaderImage",_e),u.provide("csrfToken",he),u.use(ce),u.use(m),u.mount("#app")});
