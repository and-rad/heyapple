import{o as v,c as $,a as e,u as W,i as U,b as y,w as R,d as O,t as l,e as n,R as oe,f as me,g as H,h as B,n as P,r as f,F as K,j as ee,k as Re,l as de,m as Ce,p as ye,q as se,v as we,s as Q,x as $e,D as N,y as Se,z as Oe,A as Ae,S as Ne,B as Pe,C as Ve}from"./vendor.js";const je=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))u(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function u(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}};je();var Y=(a,t)=>{const i=a.__vccOpts||a;for(const[u,o]of t)i[u]=o;return i};const Be={},Ue={width:"512",height:"512",version:"1.1",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},He=e("path",{d:"m114.6 507.3c13.82-0.8729 90.06-3.083 106.2-3.079h13.49l2.639-5.293c5.191-10.41 10.35-29.57 13.13-48.74 1.811-12.5 1.488-16.68-1.826-23.56-2.528-5.249-11.04-13.06-20.54-18.86-28.38-17.32-51.21-34.77-76.05-58.12-6.673-6.272-9.377-8.209-16.08-11.53-12.37-6.124-20.36-12.88-29.19-24.7-1.45-1.941-1.795-2.038-4.695-1.334-1.722 0.4182-7.18 0.8166-12.13 0.8854-19.6 0.2722-38.18-7.715-52.49-22.56-15.97-16.57-23.43-35.49-23.41-59.37 0.01786-16.86 3.547-29.88 11.93-44 9.617-16.19 27.39-30.13 43.89-34.41 2.517-0.653 4.748-1.36 4.958-1.571 0.2103-0.2107-0.05169-3.078-0.5816-6.371-1.41-8.759-0.556-21.84 1.997-30.61 7.023-24.1 24.96-41.95 48.52-48.31 11.42-3.082 29.45-2.167 40.42 2.049 0.919 0.3533 1.637-0.7202 2.994-4.474 6.21-17.18 18.79-33.75 33.11-43.62 35.65-24.56 80.99-19.9 111.3 11.44l5.539 5.719 5.025-1.229c2.764-0.6762 9.075-1.428 14.02-1.672 16.17-0.7944 31.64 3.865 45.31 13.64l5.1 3.647 12.55 0.1171c9.984 0.09312 13.77 0.4491 18.49 1.739 29.1 7.945 50.37 32.58 56 64.86 1.354 7.764 1.096 21.6-0.5502 29.5l-0.916 4.394 5.367 7.086c20.1 26.54 25.52 61.05 14.68 93.52-7.862 23.55-24.99 43.53-46.38 54.11-10.16 5.023-23.1 8.587-31.28 8.613-3.79 0.0118-4.555 0.333-8.217 3.446-6.958 5.916-20.59 13.71-28.3 16.17-1.722 0.551-4.011 1.599-5.087 2.328-1.076 0.7297-8.119 4.802-15.65 9.05-18.57 10.47-37.53 22.69-48.72 31.39-13.27 10.32-16.83 22.63-14.72 50.94 2.648 35.64 8.059 59.41 16.33 71.75l2.89 4.313 29.4 0.4963c34.14 0.5764 92.53 2.291 93.01 2.731 0.1793 0.166-74.3 0.2503-165.5 0.1877-91.21-0.0631-161.4-0.392-156-0.732zm130.9-101.8c-0.1092-1.007-3.147-5.947-6.75-10.98-7.889-11.01-19.71-28.99-22.37-34.01-1.594-3.014-2.402-3.727-4.695-4.139-7.259-1.304-17.91-5.324-27.58-10.41-1.809-0.9509 5.669 20.15 9.032 25.49 4.859 7.714 27.69 24.94 45.08 34 5.177 2.7 7.575 2.715 7.285 0.0442zm6.168-19.46c0.8235-0.9976 1.074-4.638 1.074-15.62 0-7.875-0.1764-14.5-0.3923-14.71-0.2158-0.2163-2.307 0.1044-4.647 0.7128-2.34 0.6082-7 1.335-10.35 1.616-7.067 0.5907-6.896 0-2.984 10.28 2.73 7.17 6.328 12.81 10.4 16.3 3.513 3.013 5.293 3.38 6.908 1.424zm49.91-15.13c3.913-2 11.37-9.412 15.96-15.85 3.982-5.592 8.688-15 8.214-16.42-0.1628-0.49-3.275-1.75-6.916-2.799-3.641-1.049-9.568-3.501-13.17-5.449l-6.551-3.541-2.173 2.087c-2.148 2.062-2.179 2.234-2.645 14.37-0.2592 6.754-0.6282 15.17-0.8198 18.7-0.3026 5.572-0.1405 6.682 1.232 8.43 1.896 2.415 2.946 2.489 6.867 0.484zm-118.1-5.725c-2.19-4.729-6.256-17.66-6.256-19.89 0-0.8683-1.901-1.089-9.391-1.089-5.165 0-9.391 0.2195-9.391 0.488 0 1.561 25.33 25.39 26.99 25.39 0.1762 0-0.7011-2.206-1.949-4.901zm149.8-9.536c5.487-3.687 19.46-14.65 19.07-14.96-0.126-0.1032-4.197-0.3888-9.046-0.6338l-8.816-0.4452-3.967 5.891c-4.284 6.363-7.088 11.99-6.473 12.98 0.9066 1.47 4.434 0.3864 9.228-2.836z",fill:"#13ad73"},null,-1),Xe=e("path",{d:"m253.9 167.7c-0.2579 0.0513-1.238 0.5454-4.691 0.5216-3.625-0.0248 4.941 9.227 6.934 34.4-8.031-0.4678-8.408-3.285-24.81-5.999-15.88-2.627-25.28 5.883-29.57 18.88-3.429 10.39-3.592 23.66-1.19 36.39 2.348 12.45 7.148 24.39 13.74 32.65 6.909 8.654 14.05 10.96 20.49 10.82 8.459-0.1842 15.7-4.599 19.58-4.407 6.726 0.3331 13.29 8.894 28.17 2.151 6.047-2.741 12.03-7.819 17.08-14.81 4.984-6.907 9.051-15.68 11.35-25.91 2.018-8.972 2.678-19.07 1.41-30-1.616-13.93-7.519-20.42-14.9-23.01-8.286-2.905-18.43-0.8896-26.46 1.032-4.71 1.127-8.69 2.223-11.14 2.273-0.155 3e-3 -0.2829-4.1e-4 -0.4335 2e-3 -0.01-0.0695-0.0197-0.1385-0.0323-0.2078-2.249-11.58-4.704-29.29-5.401-33.64-0.152-0.9486 0.0845-1.177-0.1162-1.137z",fill:"#f2ac05","fill-rule":"evenodd"},null,-1),qe=[He,Xe];function We(a,t){return v(),$("svg",Ue,qe)}var Ke=Y(Be,[["render",We]]);const Ye={},Ge={width:"24",height:"24",version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Je=e("path",{d:"m12 0c-6.624 0-12 5.376-12 12s5.376 12 12 12 12-5.376 12-12-5.376-12-12-12zm0 3.6c1.992 0 3.6 1.608 3.6 3.6s-1.608 3.6-3.6 3.6-3.6-1.608-3.6-3.6 1.608-3.6 3.6-3.6zm0 17.04c-3 0-5.652-1.536-7.2-3.864 0.036-2.388 4.8-3.696 7.2-3.696 2.388 0 7.164 1.308 7.2 3.696-1.548 2.328-4.2 3.864-7.2 3.864z"},null,-1),Qe=[Je];function Ze(a,t){return v(),$("svg",Ge,Qe)}var et=Y(Ye,[["render",Ze]]);const tt={},nt={width:"24",height:"24",version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},lt=e("path",{d:"m12 0-2.115 2.115 8.37 8.385h-18.255v3h18.255l-8.37 8.385 2.115 2.115 12-12z"},null,-1),at=[lt];function ot(a,t){return v(),$("svg",nt,at)}var fe=Y(tt,[["render",ot]]);const st=e("div",{id:"app-name"},[e("span",null,"Hey"),e("span",null,"Apple")],-1),it={id:"nav-main"},ut={id:"nav-user"},ct={href:"https://docs.heyapple.org",target:"_blank"},rt={setup(a){const{t}=W(),i=U("csrfToken");function u(c){c.preventDefault(),fetch("/auth/local",{method:"DELETE",headers:{"X-CSRF-Token":i}}).then(d=>{d.ok?window.location="/":window.dispatchEvent(new CustomEvent("error",{detail:{msg:t("signout.err"+d.status)}}))})}function o(c){c.stopPropagation(),document.querySelector("header nav").classList.toggle("open")}return document.addEventListener("click",function(){document.querySelector("header nav").classList.remove("open")}),(c,d)=>(v(),$("header",null,[y(Ke,{id:"logo"}),st,e("nav",null,[e("button",{onClick:o},[y(fe)]),e("ul",it,[e("li",null,[y(n(oe),{to:"/"},{default:R(()=>[O(l(n(t)("nav.diary")),1)]),_:1})]),e("li",null,[y(n(oe),{to:"/food"},{default:R(()=>[O(l(n(t)("nav.food")),1)]),_:1})]),e("li",null,[y(n(oe),{to:"/recipes"},{default:R(()=>[O(l(n(t)("nav.recipes")),1)]),_:1})]),e("li",null,[y(n(oe),{to:"/shopping"},{default:R(()=>[O(l(n(t)("nav.shopping")),1)]),_:1})])]),e("ul",ut,[e("li",null,[y(n(oe),{to:"/profile"},{default:R(()=>[O(l(n(t)("nav.profile")),1)]),_:1})]),e("li",null,[y(n(oe),{to:"/settings"},{default:R(()=>[O(l(n(t)("nav.settings")),1)]),_:1})]),e("li",null,[e("a",ct,l(n(t)("nav.help")),1)]),e("li",null,[e("a",{href:"#",onClick:u},l(n(t)("nav.signout")),1)])])]),e("button",{onClick:o},[y(et)])]))}},dt={},mt={width:"24",height:"24",version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},vt=e("path",{d:"m7.6364 17.318-5.7273-5.7273-1.9091 1.9091 7.6364 7.6364 16.364-16.364-1.9091-1.9091z"},null,-1),ht=[vt];function _t(a,t){return v(),$("svg",mt,ht)}var ge=Y(dt,[["render",_t]]);const ft={},pt={width:"24",height:"24",version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},gt=e("path",{d:"m12 1.6364-12 20.727h24zm0 4.353 8.2159 14.192h-16.43zm-1.0909 4.3743v5.4545h2.1818v-5.4545zm0 6.5455v2.1818h2.1818v-2.1818z"},null,-1),bt=[gt];function yt(a,t){return v(),$("svg",pt,bt)}var $t=Y(ft,[["render",yt]]);const wt={props:["msg"],emits:["timeout"],setup(a,{emit:t}){const i=a;return me(()=>{setTimeout(function(){t("timeout",i.msg.id)},i.msg.time)}),(u,o)=>(v(),$("div",{class:P(["message",[a.msg.type,a.msg.id]])},[a.msg.type=="message"?(v(),H(ge,{key:0})):B("",!0),a.msg.type!="message"?(v(),H($t,{key:1})):B("",!0),e("p",null,l(a.msg.msg),1)],2))}};const kt={id:"messages"},xt={setup(a){const t=f([]);let i=0;function u(c){t.value.push({id:i++,type:c.type,msg:c.detail.msg,time:c.detail.timeout})}function o(c){t.value=t.value.filter(d=>d.id!=c)}return me(()=>{window.addEventListener("message",u),window.addEventListener("warning",u),window.addEventListener("error",u)}),(c,d)=>(v(),$("div",kt,[(v(!0),$(K,null,ee(t.value,s=>(v(),H(wt,{key:s.id,msg:s,onTimeout:o},null,8,["msg"]))),128))]))}};const Ct={setup(a){return me(()=>{document.querySelector("body > .spinner-container").remove()}),(t,i)=>(v(),$(K,null,[y(rt),y(n(Re)),y(xt)],64))}},Lt={},It={version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},St=e("path",{id:"path-top",d:"m0 3v2h24v-2z"},null,-1),Tt=e("path",{id:"path-mid",d:"m0 13h24v-2h-24z"},null,-1),Et=e("path",{id:"path-bottom",d:"m0 21h24v-2h-24z"},null,-1),Mt=[St,Tt,Et];function Ft(a,t){return v(),$("svg",It,Mt)}var zt=Y(Lt,[["render",Ft]]);const Dt={},Rt={width:"512",height:"512",version:"1.1",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},Ot=e("path",{d:"m251.2 4.007c-17.24-0.2277-34.69 4.924-50.29 15.67-14.33 9.866-26.9 26.43-33.11 43.62-1.357 3.754-2.073 4.828-2.992 4.475-10.97-4.217-29-5.131-40.42-2.049-23.57 6.359-41.5 24.22-48.52 48.31-2.553 8.761-3.407 21.84-1.997 30.6 0.5299 3.293 0.7902 6.162 0.5799 6.372-0.2104 0.2108-2.439 0.9186-4.956 1.572-16.5 4.283-34.28 18.21-43.89 34.41-8.382 14.11-11.91 27.14-11.93 44-0.02401 23.88 7.433 42.79 23.41 59.36 14.31 14.85 32.89 22.84 52.49 22.56 4.95-0.0689 10.41-0.4681 12.13-0.8863 2.9-0.7045 3.245-0.6061 4.695 1.334 8.833 11.82 16.82 18.58 29.19 24.7 6.707 3.32 9.412 5.257 16.09 11.53 24.85 23.35 47.68 40.8 76.05 58.12 9.503 5.8 18.01 13.61 20.54 18.86 3.313 6.878 3.637 11.06 1.825 23.56-2.778 19.18-7.936 38.33-13.13 48.74l-2.639 5.295h-13.49c-16.17-3e-3 -92.41 2.205-106.2 3.077l0.01-3e-3c-5.381 0.3399 64.84 0.6684 156 0.7315 91.2 0.0625 165.7-0.0216 165.5-0.1878-0.4753-0.4399-58.86-2.155-93-2.731l-29.4-0.4942-2.89-4.313c-8.274-12.35-13.68-36.12-16.33-71.76-2.105-28.31 1.454-40.62 14.72-50.94 11.18-8.699 30.14-20.92 48.72-31.39 7.533-4.248 14.57-8.318 15.65-9.048 1.076-0.7296 3.366-1.779 5.087-2.33 7.71-2.467 21.34-10.26 28.3-16.17 3.662-3.113 4.427-3.435 8.218-3.446 8.183-0.0267 21.12-3.59 31.28-8.613 21.39-10.58 38.52-30.56 46.38-54.11 10.84-32.47 5.42-66.98-14.68-93.52l-5.364-7.084 0.916-4.395c1.646-7.896 1.904-21.74 0.5502-29.5-5.632-32.29-26.9-56.92-56-64.86-4.726-1.29-8.51-1.647-18.49-1.74l-12.55-0.1186-5.101-3.647c-13.67-9.776-29.15-14.43-45.31-13.64-4.95 0.2432-11.26 0.9944-14.02 1.671l-5.028 1.229-5.539-5.72c-17.07-17.63-38.89-26.81-61.05-27.1zm2.728 163.7c0.2008-0.0398-0.0367 0.1881 0.1154 1.137 0.6972 4.35 3.151 22.06 5.4 33.64 0.0118 0.0694 0.0228 0.138 0.0328 0.2076 0.1506-2e-3 0.2799 9e-5 0.4349-3e-3 2.448-0.0501 6.427-1.143 11.14-2.27 8.028-1.922 18.18-3.94 26.46-1.035 7.379 2.587 13.28 9.078 14.9 23.01 1.268 10.94 0.6106 21.03-1.407 30-2.301 10.23-6.37 19.01-11.35 25.91-5.045 6.991-11.03 12.07-17.07 14.81-14.87 6.743-21.44-1.818-28.16-2.152-3.88-0.1922-11.12 4.224-19.58 4.409-6.437 0.1402-13.58-2.169-20.49-10.82-6.596-8.262-11.39-20.2-13.74-32.65-2.402-12.73-2.24-26 1.189-36.39 4.29-13 13.69-21.51 29.58-18.88 16.41 2.714 16.78 5.532 24.81 6-1.993-25.18-10.56-34.43-6.936-34.4 3.453 0.0238 4.434-0.4726 4.692-0.5239zm45.16 159.1 6.55 3.542c3.603 1.947 9.529 4.401 13.17 5.45 3.641 1.049 6.753 2.307 6.916 2.797 0.4733 1.423-4.232 10.83-8.214 16.42-4.588 6.442-12.05 13.85-15.96 15.86-3.919 2.004-4.971 1.93-6.867-0.4843-1.372-1.748-1.532-2.86-1.229-8.432 0.1916-3.529 0.558-11.94 0.8171-18.7 0.4657-12.13 0.4983-12.3 2.646-14.37zm35.38 12.77 8.817 0.4448c4.849 0.245 8.919 0.5294 9.045 0.6326 0.3835 0.315-13.58 11.27-19.07 14.96-4.795 3.222-8.322 4.307-9.229 2.837-0.6151-0.9971 2.187-6.619 6.471-12.98zm-166.7 4.596c7.489 0 9.391 0.219 9.391 1.087 0 2.234 4.067 15.16 6.257 19.89 1.248 2.694 2.123 4.9 1.947 4.9-1.66 0-26.99-23.83-26.99-25.39 0-0.2685 4.226-0.4876 9.391-0.4876zm16.13 1.727c0.0388-0.0118 0.0851-6e-3 0.1417 0.0231 9.674 5.087 20.32 9.107 27.58 10.41 2.293 0.4121 3.101 1.124 4.695 4.138 2.657 5.026 14.48 23 22.37 34.02 3.603 5.03 6.639 9.968 6.748 10.98 0.2897 2.671-2.108 2.658-7.285-0.0429-17.39-9.068-40.22-26.29-45.07-34.01-3.258-5.172-10.38-25.14-9.173-25.52zm67.9 9.71c0.263-9e-3 0.4337 9e-3 0.4876 0.0625 0.2159 0.2154 0.3921 6.837 0.3921 14.71 0 10.98-0.2506 14.62-1.074 15.62-1.615 1.956-3.397 1.59-6.909-1.423-4.068-3.49-7.665-9.13-10.4-16.3-3.912-10.28-4.082-9.686 2.985-10.28 3.355-0.2804 8.013-1.006 10.35-1.615 1.755-0.4562 3.373-0.7502 4.162-0.7776z"},null,-1),At=[Ot];function Nt(a,t){return v(),$("svg",Rt,At)}var Pt=Y(Dt,[["render",Nt]]);const Vt={},jt={width:"24",height:"24",version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Bt=e("path",{d:"m12 6c1.65 0 3-1.35 3-3s-1.35-3-3-3-3 1.35-3 3 1.35 3 3 3zm0 3c-1.65 0-3 1.35-3 3s1.35 3 3 3 3-1.35 3-3-1.35-3-3-3zm0 9c-1.65 0-3 1.35-3 3s1.35 3 3 3 3-1.35 3-3-1.35-3-3-3z"},null,-1),Ut=[Bt];function Ht(a,t){return v(),$("svg",jt,Ut)}var Te=Y(Vt,[["render",Ht]]);const Xt={id:"filter"},qt=O(" This is the main search & filter area"),Wt={id:"main"},Kt={class:"controls"},Yt=e("span",{class:"spacer"},null,-1),Gt={class:"content"},Jt=O("This is the main area"),Qt={id:"details"},Zt={class:"controls"},en=e("span",{class:"spacer"},null,-1),tn={class:"placeholder"},ie={emits:["detailVisibility"],setup(a,{expose:t,emit:i}){const{t:u}=W(),o=f(""),c=f("");function d(){o.value==""?(o.value="open-filter",c.value="",i("detailVisibility")):o.value=""}function s(){i("detailVisibility"),c.value==""?(c.value="open-details",o.value=""):c.value=""}function L(){i("detailVisibility"),c.value==""&&(c.value="open-details",o.value="")}return t({showDetails:L}),(h,w)=>(v(),$("main",{class:P([o.value,c.value])},[e("div",Xt,[de(h.$slots,"filter",{},()=>[qt])]),e("div",Wt,[e("div",Kt,[e("button",{onClick:d,class:"open-filter icon"},[y(zt)]),Yt,e("button",{onClick:s,class:"open-details icon"},[y(Te)])]),e("div",Gt,[de(h.$slots,"main",{},()=>[Jt])])]),e("div",Qt,[e("div",Zt,[de(h.$slots,"head-details"),en,e("button",{onClick:s,class:"open-details icon"},[y(fe)])]),de(h.$slots,"details",{},()=>[e("div",tn,[y(Pt),e("p",null,l(n(u)("details.noitem")),1)])])])],2))}},nn=["placeholder"],ln=O("Additional filters"),Ee={props:["data","placeholder"],emits:["result"],setup(a,{emit:t}){const i=a;var u=void 0;function o(d){d.preventDefault(),clearTimeout(u),u=setTimeout(function(){c(d.target.closest("form"))},500)}function c(d){let s=new FormData(d),L=i.data.filter(h=>{let w=h.size||1;for(let b of s.keys()){if(b=="name"){let r=s.get(b).toLowerCase();if(!h[b].toLowerCase().includes(r))return!1;continue}let[C,I]=s.getAll(b).map(r=>parseFloat(r));if(!isNaN(C)&&!isNaN(I)&&(h[b]/w<C||I<h[b]/w))return!1}return!0});t("result",L)}return(d,s)=>(v(),$("form",null,[e("input",{type:"text",name:"name",placeholder:a.placeholder,onInput:o},null,40,nn),de(d.$slots,"default",{confirm:o},()=>[ln])]))}};const an={class:"slider"},on=["name","value"],sn=O(" \xA0\u2013\xA0 "),un=["name","value"],cn={class:"bar"},rn={class:"slide"},dn=e("div",{class:"interact-area"},null,-1),mn=[dn],vn=e("div",{class:"interact-area"},null,-1),hn=[vn],X={props:["label","name","unit","min","max","frac"],emits:["input"],setup(a,{emit:t}){const i=a,{t:u}=W(),o=f(parseFloat(i.min).toFixed(i.frac)),c=f(parseFloat(i.max).toFixed(i.frac)),d=f(0),s=f(100);Ce(()=>i.min,(p,m)=>L(p)),Ce(()=>i.max,(p,m)=>h(p));function L(p){let m=parseFloat(i.min)||0,g=parseFloat(p)||m;o.value=g,c.value=Math.max(o.value,c.value);let S=parseFloat(i.max)||0;d.value=(g-m)*100/(S-m),s.value=Math.max(d.value,s.value)}function h(p){let m=parseFloat(i.max)||0,g=parseFloat(p)||m;c.value=g,o.value=Math.min(o.value,c.value);let S=parseFloat(i.min)||0;s.value=(g-S)*100/(m-S),d.value=Math.min(d.value,s.value)}function w(p){p.target.blur(),L(p.target.value),t("input",p)}function b(p){p.target.blur(),h(p.target.value),t("input",p)}function C(p){let g=p.target.closest(".slide").getBoundingClientRect(),S=p.pageX!==void 0?p.pageX:p.changedTouches[0].pageX;S=Math.min(Math.max(S-g.left,0),g.width);let k=S*100/g.width,_=parseFloat(i.min)||0,E=parseFloat(i.max)||0,A=k/100*(E-_)+_;p.target.closest("button").classList.contains("min")?(o.value=A.toFixed(i.frac),c.value=Math.max(o.value,c.value),d.value=k,s.value=Math.max(d.value,s.value)):(c.value=A.toFixed(i.frac),o.value=Math.min(o.value,c.value),s.value=k,d.value=Math.min(d.value,s.value)),t("input",p)}function I(p){let m=p.target.closest("button");m.addEventListener("mousemove",C),m.addEventListener("touchmove",C),m.addEventListener("mouseup",r),m.addEventListener("touchend",r),m.addEventListener("mouseleave",r),m.addEventListener("touchcancel",r),m.classList.add("active")}function r(p){let m=p.target.closest("button");m.removeEventListener("mousemove",C),m.removeEventListener("touchmove",C),m.removeEventListener("mouseup",r),m.removeEventListener("touchend",r),m.removeEventListener("mouseleave",r),m.removeEventListener("touchcancel",r),m.classList.remove("active")}return(p,m)=>(v(),$("div",an,[e("label",null,[e("span",null,l(a.label)+" ("+l(n(u)("unit."+a.unit))+")",1),e("input",{type:"text",name:a.name,value:o.value,onChange:w},null,40,on),sn,e("input",{type:"text",name:a.name,value:c.value,onChange:b},null,40,un)]),e("div",cn,[e("div",rn,[e("div",{class:"overlay",style:ye({left:d.value+"%",right:100-s.value+"%"})},null,4),e("button",{type:"button",class:"handle min",style:ye({left:d.value+"%"}),onMousedown:I,onTouchstart:I},mn,36),e("button",{type:"button",class:"handle max",style:ye({left:s.value+"%"}),onMousedown:I,onTouchstart:I},hn,36)])])]))}};const _n={class:"clickable-input"},fn=["placeholder"],pn=["value"],Me={props:["label","placeholder"],emits:["confirm"],setup(a,{emit:t}){const i=f("");function u(o){o.preventDefault(),t("confirm",i.value),i.value=""}return(o,c)=>(v(),$("form",_n,[se(e("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=d=>i.value=d),placeholder:a.placeholder},null,8,fn),[[we,i.value]]),e("input",{type:"submit",onClick:u,value:a.label},null,8,pn)]))}};const gn={class:"clickable-select"},bn={value:"0",selected:""},yn=["value"],$n=["disabled"],wn={props:["label","placeholder","items","disabled"],emits:["confirm"],setup(a,{emit:t}){const i=a,{locale:u}=W(),o=f(0),c=new Intl.Collator(u.value,{numeric:!0}),d=Q(()=>[...i.items].sort((L,h)=>c.compare(L.name,h.name)));function s(L){L.preventDefault(),o.value&&t("confirm",o.value)}return(L,h)=>(v(),$("form",gn,[se(e("select",{"onUpdate:modelValue":h[0]||(h[0]=w=>o.value=w)},[e("option",bn,l(a.placeholder),1),(v(!0),$(K,null,ee(n(d),w=>(v(),$("option",{key:w.id,value:w.id},l(w.name),9,yn))),128))],512),[[$e,o.value]]),e("button",{type:"submit",class:"async",onClick:s,disabled:a.disabled},l(a.label),9,$n)]))}};const kn={class:"clickable-date"},xn=["value"],Cn=["value"],Ln=["disabled"],Fe={props:["label","date","time","disabled"],emits:["confirm"],setup(a,{emit:t}){function i(u){u.preventDefault();let o=new FormData(u.target.closest("form"));t("confirm",o.get("date"),o.get("time"))}return(u,o)=>(v(),$("form",kn,[e("input",{type:"date",name:"date",value:a.date},null,8,xn),e("input",{type:"time",name:"time",value:a.time},null,8,Cn),e("button",{type:"submit",class:"async",onClick:i,disabled:a.disabled},l(a.label),9,Ln)]))}};const In={},Sn={class:"icon sort-arrow"};function Tn(a,t){return v(),$("span",Sn)}var re=Y(In,[["render",Tn]]);const En=["onClick"],Mn={class:"name"},Fn={class:"num"},zn={class:"unit"},Dn={class:"m num"},Rn={class:"unit"},On={class:"m num"},An={class:"unit"},Nn={class:"m num"},Pn={class:"unit"},ze={props:["items"],emits:"selected",setup(a,{emit:t}){const i=a,{t:u,locale:o}=W(),c=f("name"),d=f("asc"),s=new Intl.Collator(o.value,{numeric:!0}),L=Q(()=>d.value=="asc"?[...i.items].sort((b,C)=>s.compare(b[c.value],C[c.value])):[...i.items].sort((b,C)=>-s.compare(b[c.value],C[c.value])));function h(b,C,I=1){return C?+parseFloat(b/C).toFixed(I):b}function w(b){let C=b.target.dataset.sort;c.value==C?d.value=d.value=="asc"?"desc":"asc":c.value=C}return(b,C)=>(v(),$("table",null,[e("thead",null,[e("tr",{class:P(d.value)},[e("th",{class:P(["name sort",{active:c.value=="name"}]),onClick:w,"data-sort":"name"},[O(l(n(u)("food.name"))+" ",1),y(re)],2),e("th",{class:P(["num sort",{active:c.value=="kcal"}]),onClick:w,"data-sort":"kcal"},[y(re),O(" "+l(n(u)("food.energy")),1)],2),e("th",{class:P(["m num sort",{active:c.value=="fat"}]),onClick:w,"data-sort":"fat"},[y(re),O(" "+l(n(u)("food.fat")),1)],2),e("th",{class:P(["m num sort",{active:c.value=="carb"}]),onClick:w,"data-sort":"carb"},[y(re),O(" "+l(n(u)("food.carbs2")),1)],2),e("th",{class:P(["m num sort",{active:c.value=="prot"}]),onClick:w,"data-sort":"prot"},[y(re),O(" "+l(n(u)("food.protein")),1)],2)],2)]),e("tbody",null,[(v(!0),$(K,null,ee(n(L),I=>(v(),$("tr",{key:I.id,onClick:r=>b.$emit("selected",I.id)},[e("td",Mn,l(I.name),1),e("td",Fn,[O(l(h(I.kcal,I.size))+" ",1),e("span",zn,l(n(u)("unit.cal")),1)]),e("td",Dn,[O(l(h(I.fat,I.size))+" ",1),e("span",Rn,l(n(u)("unit.g")),1)]),e("td",On,[O(l(h(I.carb,I.size))+" ",1),e("span",An,l(n(u)("unit.g")),1)]),e("td",Nn,[O(l(h(I.prot,I.size))+" ",1),e("span",Pn,l(n(u)("unit.g")),1)])],8,En))),128))])]))}},Vn={},jn={width:"24",height:"24",version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Bn=e("path",{d:"m-7.5e-8 19.001v4.9993h4.9993l14.745-14.745-4.9993-4.9993zm23.61-13.611c0.51993-0.51993 0.51993-1.3598 0-1.8797l-3.1196-3.1196c-0.51993-0.51993-1.3598-0.51993-1.8797 0l-2.4397 2.4397 4.9993 4.9993z"},null,-1),Un=[Bn];function Hn(a,t){return v(),$("svg",jn,Un)}var ke=Y(Vn,[["render",Hn]]);const Xn={key:0,class:"new-item"},qn=e("hr",null,null,-1),Wn=e("section",{class:"subtitle"},"Some food category",-1),Kn={class:"tags"},Yn=e("span",{class:"tag"},"Tag 1",-1),Gn=e("span",{class:"tag"},"Tag 2",-1),Jn=e("span",{class:"tag"},"Tag 3",-1),Qn=["disabled"],Zn=e("hr",null,null,-1),el={class:"tracking no-edit-mode"},tl={class:"tracking-amount"},nl={class:"unit"},ll=e("label",null,"Add to recipe",-1),al=e("label",null,"Add to diary",-1),ol=e("hr",null,null,-1),sl={class:"nutrient-block"},il=["disabled"],ul=["value"],cl={class:"unit"},rl=["value"],dl={class:"unit"},ml=["value"],vl={class:"unit"},hl=["value"],_l={class:"unit"},fl=["value"],pl={class:"unit"},gl=["disabled"],bl=["value"],yl={class:"unit"},$l=["value"],wl={class:"unit"},kl=["value"],xl={class:"unit"},Cl=["value"],Ll={class:"unit"},Il=["value"],Sl={class:"unit"},Tl={setup(a){const{t}=W(),i=U("log"),u=U("csrfToken"),o=U("perms"),c=U("food"),d=U("recipes"),s=U("diary"),L=f([]),h=f(null),w=f(!1),b=f(!1),C=f(!1),I=f(!1),r=f(100),p=f(N.now().toISODate()),m=f(N.now().toLocaleString(N.TIME_24_SIMPLE)),g=f(null),S=f(null);function k(D){fetch("/api/v1/food",{method:"POST",headers:{"X-CSRF-Token":u}}).then(x=>{if(!x.ok)throw t("createfood.err"+x.status);return x.json()}).then(x=>{x.name=D,c.value.push(x),L.value.push(x),i.msg(t("createfood.ok")),q(x.id)}).catch(x=>i.err(x))}function _(){b.value=!0;let D=h.value.id;fetch("/api/v1/food/"+D,{method:"PUT",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":u},body:new URLSearchParams(new FormData(S.value))}).then(x=>{if(!x.ok)throw t("savefood.err"+x.status);return w.value=!1,fetch("/api/v1/food/"+D)}).then(x=>x.json()).then(x=>{x.name=t(x.id.toString()),c.value=c.value.map(F=>x.id==F.id?x:F),L.value=L.value.map(F=>x.id==F.id?x:F),h.value=h.value.id==x.id?x:h.value,i.msg(t("savefood.ok"))}).catch(x=>i.err(x)).finally(()=>{setTimeout(function(){b.value=!1},500)})}function E(D){C.value=!0,fetch(`/api/v1/recipe/${D}/ingredient/${h.value.id}`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":u},body:new URLSearchParams({amount:r.value})}).then(x=>{if(!x.ok)throw t("addfood.err"+x.status);return fetch("/api/v1/recipe/"+D)}).then(x=>x.json()).then(x=>{d.value=d.value.map(F=>x.id==F.id?x:F),r.value=100,i.msg(t("addfood.ok"))}).catch(x=>i.err(x)).finally(()=>{setTimeout(function(){C.value=!1},500)})}function A(D,x){I.value=!0,fetch(`/api/v1/diary/${D}`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":u},body:new URLSearchParams({id:h.value.id,amount:r.value,time:x})}).then(F=>{if(!F.ok)throw t("adddiary.err"+F.status);return fetch("/api/v1/diary/"+D.replaceAll("-","/"))}).then(F=>F.json()).then(F=>{s.value[D]=F[0],r.value=100,i.msg(t("adddiary.ok"))}).catch(F=>i.err(F)).finally(()=>{setTimeout(function(){I.value=!1},500)})}function G(D){L.value=D,h.value&&L.value.filter(x=>x.id==h.value.id).length==0&&(h.value=null)}function q(D){h.value=L.value.filter(x=>x.id==D)[0],p.value=N.now().toISODate(),m.value=N.now().toLocaleString(N.TIME_24_SIMPLE),r.value=100,g.value.showDetails()}function ne(){w.value?_():w.value=!0}function V(D){D.target.blur(),isNaN(parseFloat(D.target.value))&&(D.target.value=h.value[D.target.name])}return(D,x)=>(v(),H(ie,{ref_key:"main",ref:g,onDetailVisibility:x[1]||(x[1]=F=>w.value=!1),class:P({"edit-mode":w.value})},Se({filter:R(()=>[n(o).canCreateFood?(v(),$("section",Xn,[e("h2",null,l(n(t)("aria.headnew")),1),y(Me,{label:n(t)("btn.new"),placeholder:n(t)("food.hintnew"),onConfirm:k},null,8,["label","placeholder"])])):B("",!0),qn,e("section",null,[e("h2",null,l(n(t)("aria.headsearch")),1),y(Ee,{data:n(c),placeholder:n(t)("food.hintsearch"),onResult:G},{default:R(F=>[e("fieldset",null,[e("legend",null,l(n(t)("aria.headmacro1")),1),y(X,{label:n(t)("food.energy"),onInput:F.confirm,name:"kcal",unit:"cal",min:"0",max:"900",frac:"0"},null,8,["label","onInput"]),y(X,{label:n(t)("food.fat"),onInput:F.confirm,name:"fat",unit:"g",min:"0",max:"100",frac:"0"},null,8,["label","onInput"]),y(X,{label:n(t)("food.carbs"),onInput:F.confirm,name:"carb",unit:"g",min:"0",max:"100",frac:"0"},null,8,["label","onInput"]),y(X,{label:n(t)("food.protein"),onInput:F.confirm,name:"prot",unit:"g",min:"0",max:"89",frac:"0"},null,8,["label","onInput"]),y(X,{label:n(t)("food.fiber"),onInput:F.confirm,name:"fib",unit:"g",min:"0",max:"71",frac:"0"},null,8,["label","onInput"])]),e("fieldset",null,[e("legend",null,l(n(t)("aria.headmacro2")),1),y(X,{label:n(t)("food.fatsat"),onInput:F.confirm,name:"fatsat",unit:"g",min:"0",max:"83",frac:"0"},null,8,["label","onInput"]),y(X,{label:n(t)("food.fato3"),onInput:F.confirm,name:"fato3",unit:"g",min:"0",max:"54",frac:"0"},null,8,["label","onInput"]),y(X,{label:n(t)("food.fato6"),onInput:F.confirm,name:"fato6",unit:"g",min:"0",max:"70",frac:"0"},null,8,["label","onInput"]),y(X,{label:n(t)("food.sugar"),onInput:F.confirm,name:"sug",unit:"g",min:"0",max:"100",frac:"0"},null,8,["label","onInput"]),y(X,{label:n(t)("food.salt"),onInput:F.confirm,name:"salt",unit:"g",min:"0",max:"100",frac:"0"},null,8,["label","onInput"])])]),_:1},8,["data","placeholder"])])]),main:R(()=>[y(ze,{items:L.value,onSelected:q},null,8,["items"])]),_:2},[h.value?{name:"head-details",fn:R(()=>[e("h2",null,l(h.value.name),1)])}:void 0,h.value?{name:"details",fn:R(()=>[Wn,e("section",Kn,[Yn,Gn,Jn,n(o).canCreateFood||n(o).canEditFood?(v(),$("button",{key:0,class:"icon async",disabled:b.value,onClick:ne},[w.value?B("",!0):(v(),H(ke,{key:0})),w.value?(v(),H(ge,{key:1})):B("",!0)],8,Qn)):B("",!0)]),Zn,e("section",el,[e("h2",null,l(n(t)("aria.headtrack")),1),e("fieldset",tl,[e("div",null,[e("label",null,l(n(t)("food.amount")),1),se(e("input",{type:"number","onUpdate:modelValue":x[0]||(x[0]=F=>r.value=F),name:"amount"},null,512),[[we,r.value]]),e("span",nl,l(n(t)("unit.g")),1)])]),e("fieldset",null,[ll,y(wn,{label:n(t)("btn.add"),placeholder:n(t)("food.hintrec"),items:n(d),disabled:C.value,onConfirm:E},null,8,["label","placeholder","items","disabled"])]),e("fieldset",null,[al,y(Fe,{label:n(t)("btn.add"),time:m.value,date:p.value,disabled:I.value,onConfirm:A},null,8,["label","time","date","disabled"])])]),ol,e("section",null,[e("h2",null,l(n(t)("aria.headnutrients")),1),e("form",{ref_key:"form",ref:S},[e("div",sl,[e("fieldset",{disabled:!w.value,class:"col50"},[e("div",null,[e("label",null,l(n(t)("food.energy")),1),e("input",{type:"text",value:h.value.kcal,name:"kcal",onChange:V},null,40,ul),e("span",cl,l(n(t)("unit.cal")),1)]),e("div",null,[e("label",null,l(n(t)("food.fat")),1),e("input",{type:"text",value:h.value.fat,name:"fat",onChange:V},null,40,rl),e("span",dl,l(n(t)("unit.g")),1)]),e("div",null,[e("label",null,l(n(t)("food.carbs2")),1),e("input",{type:"text",value:h.value.carb,name:"carb",onChange:V},null,40,ml),e("span",vl,l(n(t)("unit.g")),1)]),e("div",null,[e("label",null,l(n(t)("food.protein")),1),e("input",{type:"text",value:h.value.prot,name:"prot",onChange:V},null,40,hl),e("span",_l,l(n(t)("unit.g")),1)]),e("div",null,[e("label",null,l(n(t)("food.fiber")),1),e("input",{type:"text",value:h.value.fib,name:"fib",onChange:V},null,40,fl),e("span",pl,l(n(t)("unit.g")),1)])],8,il),e("fieldset",{disabled:!w.value,class:"col50"},[e("div",null,[e("label",null,l(n(t)("food.fatsat")),1),e("input",{type:"text",value:h.value.fatsat,name:"fatsat",onChange:V},null,40,bl),e("span",yl,l(n(t)("unit.g")),1)]),e("div",null,[e("label",null,l(n(t)("food.fato3")),1),e("input",{type:"text",value:h.value.fato3,name:"fato3",onChange:V},null,40,$l),e("span",wl,l(n(t)("unit.g")),1)]),e("div",null,[e("label",null,l(n(t)("food.fato6")),1),e("input",{type:"text",value:h.value.fato6,name:"fato6",onChange:V},null,40,kl),e("span",xl,l(n(t)("unit.g")),1)]),e("div",null,[e("label",null,l(n(t)("food.sugar")),1),e("input",{type:"text",value:h.value.sug,name:"sug",onChange:V},null,40,Cl),e("span",Ll,l(n(t)("unit.g")),1)]),e("div",null,[e("label",null,l(n(t)("food.salt")),1),e("input",{type:"text",value:h.value.salt,name:"salt",onChange:V},null,40,Il),e("span",Sl,l(n(t)("unit.g")),1)])],8,gl)])],512)])])}:void 0]),1032,["class"]))}};const El=["disabled"],Ml=["value"],Fl={class:"unit"},zl=["value"],Dl={props:["items","disabled"],setup(a,{expose:t}){const i=a,{t:u,locale:o}=W(),c=f("name"),d=f(null),s=new Intl.Collator(o.value,{numeric:!0}),L=Q(()=>i.items.map(C=>({id:C.id,amount:C.amount,name:u(C.id.toString())})).sort((C,I)=>s.compare(C[c.value],I[c.value])));function h(b){b.target.blur();let C=parseFloat(b.target.value);(isNaN(C)||C<0)&&(b.target.value=0)}function w(){let b=new FormData(d.value),C=b.getAll("id"),I=b.getAll("amount"),r=[];return i.items.forEach(p=>{let m=parseInt(C.indexOf(p.id.toString())),g=parseFloat(I[m]);g!=p.amount&&r.push({id:p.id,amount:g})}),r}return t({getDiff:w}),(b,C)=>(v(),$("form",{class:"ingredients",ref_key:"form",ref:d},[e("fieldset",{disabled:a.disabled},[(v(!0),$(K,null,ee(n(L),I=>(v(),$("div",{key:I.id},[e("label",null,l(I.name),1),e("input",{type:"number",name:"amount",value:I.amount,onChange:h},null,40,Ml),e("span",Fl,l(n(u)("unit.g")),1),e("input",{type:"hidden",name:"id",value:I.id},null,8,zl)]))),128))],8,El)],512))}},Rl={},Ol={width:"24",height:"24",version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Al=e("path",{d:"m0 18.316h2.5263v0.63158h-1.2632v1.2632h1.2632v0.63158h-2.5263v1.2632h3.7895v-5.0526h-3.7895zm1.2632-11.368h1.2632v-5.0526h-2.5263v1.2632h1.2632zm-1.2632 3.7895h2.2737l-2.2737 2.6526v1.1368h3.7895v-1.2632h-2.2737l2.2737-2.6526v-1.1368h-3.7895zm6.3158-7.5789v2.5263h17.684v-2.5263zm0 17.684h17.684v-2.5263h-17.684zm0-7.5789h17.684v-2.5263h-17.684z"},null,-1),Nl=[Al];function Pl(a,t){return v(),$("svg",Ol,Nl)}var Vl=Y(Rl,[["render",Pl]]);const jl={class:"new-item"},Bl=e("hr",null,null,-1),Ul=["disabled"],Hl=["value"],Xl=["innerHTML"],ql={class:"tags"},Wl=e("span",{class:"tag no-edit-mode"},"Tag 1",-1),Kl=e("span",{class:"tag no-edit-mode"},"Tag 2",-1),Yl=e("span",{class:"tag no-edit-mode"},"Tag 3",-1),Gl=["disabled"],Jl=e("hr",null,null,-1),Ql={key:0,class:"tracking no-edit-mode"},Zl={class:"tracking-amount"},ea={class:"unit"},ta=e("label",null,"Add to diary",-1),na=e("hr",null,null,-1),la=["innerHTML"],aa=e("hr",null,null,-1),oa={class:"no-edit-mode"},sa={class:"nutrient-block"},ia={class:"col50"},ua={class:"unit"},ca={class:"unit"},ra={class:"col50"},da={class:"unit"},ma={class:"unit"},va=e("hr",null,null,-1),ha={class:"prep"},_a=["disabled"],fa={class:"prep-size"},pa=["value"],ga=["disabled"],ba=["value"],ya={class:"unit"},$a=["value"],wa={class:"unit"},ka=["value"],xa={class:"unit"},Ca=["value"],La={class:"unit"},Ia={class:"placeholder"},Sa={setup(a){const{t}=W(),i=U("log"),u=U("csrfToken");U("perms");const o=U("recipes"),c=U("diary"),d=f([]),s=f(null),L=f(!1),h=f(!1),w=f(!1),b=f(1),C=f("&nbsp;"),I=f(N.now().toISODate()),r=f(N.now().toLocaleString(N.TIME_24_SIMPLE)),p=f(null),m=f(null),g=f(null);function S(M,T=2){return+parseFloat(M/(s.value.size||1)).toFixed(T)}function k(M){return Math.min.apply(Math,o.value.map(T=>Math.floor(T[M]/T.size)))}function _(M){return Math.max.apply(Math,o.value.map(T=>Math.ceil(T[M]/T.size)))}function E(M){fetch("/api/v1/recipe",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":u},body:new URLSearchParams({name:M})}).then(T=>{if(!T.ok)throw t("createrec.err"+T.status);return T.json()}).then(T=>{T.isowner=!0,o.value.push(T),d.value.push(T),i.msg(t("createrec.ok")),ne(T.id)}).catch(T=>i.err(T))}function A(){h.value=!0;let M=s.value.id,T=s.value.owner,j=s.value.isowner;fetch("/api/v1/recipe/"+M,{method:"PUT",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":u},body:new URLSearchParams(new FormData(m.value))}).then(z=>{if(!z.ok)throw t("saverec.err"+z.status);return G(M)}).then(()=>fetch("/api/v1/recipe/"+M)).then(z=>z.json()).then(z=>{z.owner=T,z.isowner=j,o.value=o.value.map(Z=>z.id==Z.id?z:Z),d.value=d.value.map(Z=>z.id==Z.id?z:Z),s.value=s.value.id==z.id?z:s.value,i.msg(t("saverec.ok"))}).catch(z=>i.err(z)).finally(()=>{setTimeout(function(){h.value=!1},500)})}function G(M){let T=g.value.getDiff();return T.length==0?new Promise(j=>{L.value=!1,j()}):new Promise((j,z)=>{let Z=0,be;T.forEach(xe=>{fetch(`/api/v1/recipe/${M}/ingredient/${xe.id}`,{method:"PUT",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":u},body:new URLSearchParams({amount:xe.amount})}).then(_e=>{if(++Z,!_e.ok)throw t("saverec.err"+_e.status)}).catch(_e=>be=_e).finally(()=>{Z==T.length&&(be?z(be):(L.value=!1,j()))})})})}function q(M,T){w.value=!0;let j=new URLSearchParams({recipe:s.value.name});s.value.items.forEach(z=>{j.append("id",z.id),j.append("amount",S(z.amount)*b.value),j.append("time",T)}),fetch(`/api/v1/diary/${M}`,{method:"POST",body:j,headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":u}}).then(z=>{if(!z.ok)throw t("adddiary.err"+z.status);return fetch("/api/v1/diary/"+M.replaceAll("-","/"))}).then(z=>z.json()).then(z=>{c.value[M]=z[0],b.value=1,i.msg(t("adddiary.ok"))}).catch(z=>i.err(z)).finally(()=>{setTimeout(function(){w.value=!1},500)})}function ne(M){s.value=d.value.filter(T=>T.id==M)[0],I.value=N.now().toISODate(),r.value=N.now().toLocaleString(N.TIME_24_SIMPLE),b.value=1,p.value.showDetails(),"isowner"in s.value?D():V()}function V(){fetch(`/api/v1/recipe/${s.value.id}/owner`).then(M=>{if(!M.ok)throw M;return M.json()}).then(M=>{s.value.isowner=M.isowner,s.value.owner=M.owner,D()}).catch(()=>{i.err(t("recowner.err")),C.value="&nbsp;"})}function D(){s.value.isowner?C.value=t("recipe.isowner"):s.value.owner?C.value=t("recipe.owner",{name:s.value.owner}):C.value=t("recipe.ispublic")}function x(M){d.value=M,s.value&&d.value.filter(T=>T.id==s.value.id).length==0&&(s.value=null)}function F(){L.value?A():L.value=!0}function he(M){M.target.blur(),isNaN(parseFloat(M.target.value))&&(M.target.value=s.value[M.target.name])}return me(()=>d.value=[...o.value]),(M,T)=>(v(),H(ie,{ref_key:"main",ref:p,onDetailVisibility:T[1]||(T[1]=j=>L.value=!1),class:P({"edit-mode":L.value})},Se({filter:R(()=>[e("section",jl,[e("h2",null,l(n(t)("aria.headnewrec")),1),y(Me,{label:n(t)("btn.new"),placeholder:n(t)("recipe.hintnew"),onConfirm:E},null,8,["label","placeholder"])]),Bl,e("section",null,[e("h2",null,l(n(t)("aria.headsearch")),1),y(Ee,{data:n(o),placeholder:n(t)("recipe.hintsearch"),onResult:x},{default:R(j=>[e("fieldset",null,[y(X,{label:n(t)("food.energy"),min:k("kcal"),max:_("kcal"),onInput:j.confirm,name:"kcal",unit:"cal",frac:"0"},null,8,["label","min","max","onInput"]),y(X,{label:n(t)("food.fat"),min:k("fat"),max:_("fat"),onInput:j.confirm,name:"fat",unit:"g",frac:"0"},null,8,["label","min","max","onInput"]),y(X,{label:n(t)("food.carbs"),min:k("carb"),max:_("carb"),onInput:j.confirm,name:"carb",unit:"g",frac:"0"},null,8,["label","min","max","onInput"]),y(X,{label:n(t)("food.protein"),min:k("prot"),max:_("prot"),onInput:j.confirm,name:"prot",unit:"g",frac:"0"},null,8,["label","min","max","onInput"])])]),_:1},8,["data","placeholder"])])]),main:R(()=>[y(ze,{items:d.value,onSelected:ne},null,8,["items"])]),_:2},[s.value?{name:"head-details",fn:R(()=>[e("form",{ref_key:"form",ref:m,autocomplete:"off",id:"form-recipe"},[e("fieldset",{disabled:!L.value},[e("input",{type:"text",name:"name",value:s.value.name},null,8,Hl)],8,Ul)],512)])}:void 0,s.value?{name:"details",fn:R(()=>[e("section",{class:"subtitle no-edit-mode",innerHTML:C.value},null,8,Xl),e("section",ql,[Wl,Kl,Yl,s.value.isowner?(v(),$("button",{key:0,class:"icon async",disabled:h.value,onClick:F},[L.value?B("",!0):(v(),H(ke,{key:0})),L.value?(v(),H(ge,{key:1})):B("",!0)],8,Gl)):B("",!0)]),Jl,s.value.items.length?(v(),$("section",Ql,[e("h2",null,l(n(t)("aria.headtrack")),1),e("fieldset",Zl,[e("div",null,[e("label",null,l(n(t)("food.amount")),1),se(e("input",{type:"number","onUpdate:modelValue":T[0]||(T[0]=j=>b.value=j),name:"amount"},null,512),[[we,b.value]]),e("span",ea,l(n(t)("recipe.size",b.value)),1)])]),e("fieldset",null,[ta,y(Fe,{label:n(t)("btn.add"),time:r.value,date:I.value,disabled:w.value,onConfirm:q},null,8,["label","time","date","disabled"])])])):B("",!0),na,e("section",null,[e("h2",null,l(n(t)("aria.headingred")),1),s.value.items.length?B("",!0):(v(),$("p",{key:0,class:"msg-noitems",innerHTML:n(t)("recipe.noitems")},null,8,la)),y(Dl,{ref_key:"ingredients",ref:g,items:s.value.items,disabled:!L.value},null,8,["items","disabled"])]),aa,e("section",oa,[e("h2",null,l(n(t)("aria.headnutrients")),1),e("div",sa,[e("div",ia,[e("div",null,[e("label",null,l(n(t)("food.energy")),1),e("span",null,l(S(s.value.kcal,1)),1),e("span",ua,l(n(t)("unit.cal")),1)]),e("div",null,[e("label",null,l(n(t)("food.fat")),1),e("span",null,l(S(s.value.fat,1)),1),e("span",ca,l(n(t)("unit.g")),1)])]),e("div",ra,[e("div",null,[e("label",null,l(n(t)("food.carbs2")),1),e("span",null,l(S(s.value.carb,1)),1),e("span",da,l(n(t)("unit.g")),1)]),e("div",null,[e("label",null,l(n(t)("food.protein")),1),e("span",null,l(S(s.value.prot,1)),1),e("span",ma,l(n(t)("unit.g")),1)])])])]),va,e("section",ha,[e("h2",null,l(n(t)("aria.headprep")),1),e("div",null,[e("fieldset",{disabled:!L.value,class:"col50"},[e("div",fa,[e("label",null,l(n(t)("recipe.size",2)),1),e("input",{type:"text",name:"size",form:"form-recipe",value:s.value.size,onChange:he},null,40,pa),e("label",null,l(n(t)("recipe.size",s.value.size)),1)])],8,_a),e("fieldset",{disabled:!L.value,class:"col50"},[e("div",null,[e("label",null,l(n(t)("recipe.time")),1),e("input",{type:"text",disabled:"",value:s.value.preptime+s.value.cooktime+s.value.misctime},null,8,ba),e("span",ya,l(n(t)("unit.min")),1)]),e("div",null,[e("label",null,l(n(t)("recipe.preptime")),1),e("input",{type:"text",name:"preptime",form:"form-recipe",value:s.value.preptime,onChange:he},null,40,$a),e("span",wa,l(n(t)("unit.min")),1)]),e("div",null,[e("label",null,l(n(t)("recipe.cooktime")),1),e("input",{type:"text",name:"cooktime",form:"form-recipe",value:s.value.cooktime,onChange:he},null,40,ka),e("span",xa,l(n(t)("unit.min")),1)]),e("div",null,[e("label",null,l(n(t)("recipe.misctime")),1),e("input",{type:"text",name:"misctime",form:"form-recipe",value:s.value.misctime,onChange:he},null,40,Ca),e("span",La,l(n(t)("unit.min")),1)])],8,ga)]),e("div",Ia,[y(Vl),e("p",null,l(n(t)("todo.instructions")),1)])])])}:void 0]),1032,["class"]))}};const Ta=["disabled"],Ea={value:"1"},Ma={value:"2"},Fa={value:"3"},za={value:"4"},Da={value:"5"},Ra={value:"6"},Oa={value:"7"},Aa={value:"8"},Na={value:"9"},Pa={value:"10"},Va={value:"11"},ja={value:"12"},Ba=["value"],Ua=["disabled"],De={props:["mode","items"],emits:["selection"],setup(a,{emit:t}){const i=a,{t:u}=W(),o=f(N.now().month),c=f(N.now().year),d=f(null),s=Q(()=>{let p=i.items.map(m=>parseInt(m.split("-")[0])).filter((m,g,S)=>S.indexOf(m)===g);return[Math.min(...p)-1,...p,Math.max(...p)+1]}),L=Q(()=>c.value!=s.value[0]||o.value>1),h=Q(()=>c.value!=s.value[s.value.length-1]||o.value<12);let w=[];function b(){let p=N.now().toISODate(),m=N.local(c.value,o.value);m=m.minus({days:m.weekday}),!w.length&&i.mode!="toggle"&&(w=[p]),d.value.querySelectorAll("td").forEach(g=>{let S=m.toISODate();g.firstElementChild.textContent=m.day,g.firstElementChild.dataset.date=S,m.month!=o.value?g.classList.add("outside"):g.classList.remove("outside"),S==p?g.classList.add("today"):g.classList.remove("today"),i.items.indexOf(S)!=-1?g.classList.add("has-entries"):g.classList.remove("has-entries"),w.indexOf(S)!=-1?g.classList.add("active"):g.classList.remove("active"),m=m.plus({days:1})})}function C(){--o.value<1&&(o.value=12,--c.value),b()}function I(){++o.value>12&&(o.value=1,++c.value),b()}function r(p){let m=p.target.dataset.date;if(i.mode=="toggle"){let g=w.indexOf(m);g==-1?w.push(m):w.splice(g,1)}else w=[m];d.value.querySelectorAll("td>button").forEach(g=>{w.indexOf(g.dataset.date)!=-1?g.parentNode.classList.add("active"):g.parentNode.classList.remove("active")}),t("selection",w)}return me(()=>{b(),t("selection",w)}),(p,m)=>(v(),$("div",{class:P(["calendar",[a.mode]])},[e("div",null,[e("button",{class:"prev icon",onClick:C,disabled:!n(L)},[y(fe)],8,Ta),e("div",null,[se(e("select",{class:"month","onUpdate:modelValue":m[0]||(m[0]=g=>o.value=g),onChange:b},[e("option",Ea,l(n(u)("month.1")),1),e("option",Ma,l(n(u)("month.2")),1),e("option",Fa,l(n(u)("month.3")),1),e("option",za,l(n(u)("month.4")),1),e("option",Da,l(n(u)("month.5")),1),e("option",Ra,l(n(u)("month.6")),1),e("option",Oa,l(n(u)("month.7")),1),e("option",Aa,l(n(u)("month.8")),1),e("option",Na,l(n(u)("month.9")),1),e("option",Pa,l(n(u)("month.10")),1),e("option",Va,l(n(u)("month.11")),1),e("option",ja,l(n(u)("month.12")),1)],544),[[$e,o.value,void 0,{number:!0}]]),se(e("select",{class:"year","onUpdate:modelValue":m[1]||(m[1]=g=>c.value=g),onChange:b},[(v(!0),$(K,null,ee(n(s),g=>(v(),$("option",{value:g},l(g),9,Ba))),256))],544),[[$e,c.value,void 0,{number:!0}]])]),e("button",{class:"next icon",onClick:I,disabled:!n(h)},[y(fe)],8,Ua)]),e("table",{ref_key:"calendar",ref:d},[e("thead",null,[e("tr",null,[e("th",null,l(n(u)("day.cal7")),1),e("th",null,l(n(u)("day.cal1")),1),e("th",null,l(n(u)("day.cal2")),1),e("th",null,l(n(u)("day.cal3")),1),e("th",null,l(n(u)("day.cal4")),1),e("th",null,l(n(u)("day.cal5")),1),e("th",null,l(n(u)("day.cal6")),1)])]),e("tbody",null,[e("tr",null,[e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})])]),e("tr",null,[e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})])]),e("tr",null,[e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})])]),e("tr",null,[e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})])]),e("tr",null,[e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})])]),e("tr",null,[e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})]),e("td",null,[e("button",{onClick:r})])])])],512)],2))}};const Ha={class:"unit"},Xa=["disabled"],qa=["value"],Wa={class:"unit"},Ka=["value"],Ya=["value","disabled"],Ga={class:"unit"},Ja=["value"],Qa={key:0},Za={key:1},eo={props:["entries","nutrient","disabled"],setup(a,{expose:t}){const i=a,{t:u}=W(),o=U("food"),c=U("prefs"),d=f("hour"),s=f("relative"),L=f(null),h=Q(()=>{switch(d.value){case"hour":return b();case"day":return C();default:return[]}}),w=Q(()=>{if(s.value=="relative")return"%";switch(i.nutrient){case"kcal":return" "+u("unit.cal");case"fat":case"carb":case"prot":return" "+u("unit.g");default:return" "+u("unit.mg")}});function b(){let S=[];if(i.entries){let k={};i.entries.forEach(_=>{let E=parseInt(_.time),A=N.fromObject({hours:E-E%2}),G=A.toFormat("t")+" - "+A.plus({hours:2}).toFormat("t");G in k||(k[G]={name:G,entries:[]});let q={name:u(_.food.id.toString()),amount:_.food.amount,nutrient:I(_.food),isrec:!1,id:_.food.id};if(_.recipe){let ne=!1;k[G].entries.every(V=>V.isrec&&V.name==_.recipe?(V.entries.push(q),V.amount+=q.amount,V.nutrient+=q.nutrient,ne=!0,!1):!0),ne||k[G].entries.push({name:_.recipe,isrec:!0,amount:q.amount,nutrient:q.nutrient,entries:[q]})}else k[G].entries.push(q)}),S=Object.values(k),S.sort((_,E)=>_.name<E.name)}return S}function C(){return[{name:"Morning",entries:[{type:"recipe"},{type:"single"}]},{name:"Noon",entries:[{type:"recipe"},{type:"single"}]}]}function I(S){let _=o.value.filter(A=>A.id==S.id)[0][i.nutrient]*S.amount*.01;if(s.value=="metric")return Math.round(_);let E=c.value.rdi[i.nutrient];return Math.round(_*100/E)}function r(){s.value=="relative"?s.value="metric":s.value=="metric"&&(s.value="relative")}function p(S){let k=S.target.closest("div"),_=k.querySelector("fieldset");_.style.setProperty("--max-height",_.childElementCount*41+"px"),k.classList.toggle("open")}function m(S){S.target.blur();let k=parseFloat(S.target.value);(isNaN(k)||k<0)&&(S.target.value=0)}function g(){let S=new FormData(L.value);return S.getAll("id"),S.getAll("amount"),[]}return t({getDiff:g}),(S,k)=>(v(),$("form",{class:"diary-entry-list",ref_key:"form",ref:L},[(v(!0),$(K,null,ee(n(h),_=>(v(),$("fieldset",{key:_.name},[e("legend",null,l(_.name),1),(v(!0),$(K,null,ee(_.entries,E=>(v(),$("div",{class:P({recipe:E.isrec})},[E.isrec?(v(),$(K,{key:0},[e("label",null,l(E.name),1),e("button",{class:"icon",type:"button",onClick:p},[y(Te)]),e("span",null,l(E.amount),1),e("span",Ha,l(n(u)("unit.g")),1),e("span",{class:P(["nutrient",[a.nutrient,s.value]])},l(E.nutrient)+l(n(w)),3),e("fieldset",{disabled:a.disabled},[(v(!0),$(K,null,ee(E.entries,A=>(v(),$("div",{key:A.id},[e("label",null,l(A.name),1),e("input",{type:"number",name:"amount",value:A.amount,onChange:m},null,40,qa),e("span",Wa,l(n(u)("unit.g")),1),e("span",{class:P(["nutrient",[a.nutrient,s.value]])},l(A.nutrient)+l(n(w)),3),e("input",{type:"hidden",name:"id",value:A.id},null,8,Ka)]))),128))],8,Xa)],64)):(v(),$(K,{key:1},[e("label",null,l(E.name),1),e("input",{type:"number",name:"amount",value:E.amount,disabled:a.disabled,onChange:m},null,40,Ya),e("span",Ga,l(n(u)("unit.g")),1),e("span",{class:P(["nutrient",[a.nutrient,s.value]])},l(E.nutrient)+l(n(w)),3),e("input",{type:"hidden",name:"id",value:E.id},null,8,Ja)],64))],2))),256))]))),128)),e("button",{type:"button",class:"nutrient-mode-switch icon",onClick:r},[s.value=="relative"?(v(),$("span",Qa,"%")):B("",!0),s.value=="metric"?(v(),$("span",Za,"g")):B("",!0)])],512))}};const to=e("hr",null,null,-1),no=e("section",null,null,-1),lo=O(" Diary "),ao={class:"no-edit-mode"},oo={class:"subtitle no-edit-mode"},so={class:"tabs"},io=["disabled"],uo=e("hr",null,null,-1),co={key:0},ro=["innerHTML"],mo={setup(a){const{t}=W(),i=U("log"),u=U("diary"),o=f(null),c=f(N.now()),d=f("kcal"),s=f(!1),L=f(!1),h=f(null),w=Q(()=>Object.keys(u.value));let b=!1;function C(k){k.stopPropagation(),r(k.target.closest("ul"),k.movementX),b=!0}function I(k){k.stopPropagation();let _=Math.max(-16,Math.min(-k.deltaY,16));r(k.target.closest("ul"),_)}function r(k,_){let E=parseInt(k.style.getPropertyValue("--offset"))||0,A=Math.max(k.clientWidth-k.scrollWidth,Math.min(E+_,0));k.style.setProperty("--offset",A+"px")}function p(k){let _=k.target.closest("ul");_.addEventListener("pointermove",C),_.addEventListener("mouseup",m),_.addEventListener("touchend",m),_.addEventListener("mouseleave",m),_.addEventListener("touchcancel",m),b=!1}function m(k){let _=k.target.closest("ul");_.removeEventListener("pointermove",C),_.removeEventListener("mouseup",m),_.removeEventListener("touchend",m),_.removeEventListener("mouseleave",m),_.removeEventListener("touchcancel",m)}function g(k){b||(d.value=k.target.dataset.name)}function S(k){c.value=N.fromISO(k[0]);let _=c.value.toISODate();if(!u.value[_]){o.value={date:_};return}if(u.value[_].entries){o.value=u.value[_];return}fetch(`/api/v1/diary/${_.replaceAll("-","/")}/entries`).then(E=>E.json()).then(E=>{E.forEach(A=>A.time=A.date.split("T")[1].slice(0,5)),u.value[_].entries=E}).catch(E=>i.err(E)).finally(()=>o.value=u.value[_])}return(k,_)=>(v(),H(ie,{ref_key:"main",ref:h,class:"diary"},{filter:R(()=>[e("section",null,[e("h2",null,l(n(t)("aria.headcal")),1),y(De,{items:n(w),onSelection:S},null,8,["items"])]),to,no]),main:R(()=>[lo]),"head-details":R(()=>[e("h2",ao,l(c.value.weekdayLong),1)]),details:R(()=>[e("section",oo,l(c.value.toLocaleString(n(N).DATE_FULL)),1),e("section",so,[e("div",null,[e("ul",{onMousedown:p,onTouchstart:p,onWheel:I},[e("li",{class:P({active:d.value=="kcal"})},[e("button",{"data-name":"kcal",onClick:g},l(n(t)("food.energy")),1)],2),e("li",{class:P({active:d.value=="fat"})},[e("button",{"data-name":"fat",onClick:g},l(n(t)("food.fat")),1)],2),e("li",{class:P({active:d.value=="carb"})},[e("button",{"data-name":"carb",onClick:g},l(n(t)("food.carbs2")),1)],2),e("li",{class:P({active:d.value=="prot"})},[e("button",{"data-name":"prot",onClick:g},l(n(t)("food.protein")),1)],2)],32)]),e("button",{class:"icon async",disabled:s.value,onClick:_[0]||(_[0]=(...E)=>k.onEditMode&&k.onEditMode(...E))},[L.value?B("",!0):(v(),H(ke,{key:0})),L.value?(v(),H(ge,{key:1})):B("",!0)],8,io)]),uo,o.value?(v(),$("section",co,[e("h2",null,l(n(t)("aria.headlog")),1),o.value.entries?B("",!0):(v(),$("p",{key:0,class:"msg-noitems",innerHTML:n(t)("diary.noitems")},null,8,ro)),o.value.entries?(v(),H(eo,{key:1,ref:"entries",entries:o.value.entries,nutrient:d.value,disabled:!L.value},null,8,["entries","nutrient","disabled"])):B("",!0)])):B("",!0)]),_:1},512))}},vo=e("hr",null,null,-1),ho=e("section",null,null,-1),_o=O(" Shopping Lists "),fo={setup(a){const{t}=W(),i=U("diary"),u=f(null),o=Q(()=>Object.keys(i.value));function c(d){console.log(d)}return(d,s)=>(v(),H(ie,{ref_key:"main",ref:u},{filter:R(()=>[e("section",null,[e("h2",null,l(n(t)("aria.headcal")),1),y(De,{mode:"toggle",items:n(o),onSelection:c},null,8,["items"])]),vo,ho]),main:R(()=>[_o]),_:1},512))}},po=O(" Profile "),go={setup(a){return(t,i)=>(v(),H(ie,null,{main:R(()=>[po]),_:1}))}},bo=O(" Settings "),yo={setup(a){return(t,i)=>(v(),H(ie,null,{main:R(()=>[bo]),_:1}))}},$o=Oe({history:Ae(),routes:[{path:"/",name:"diary",component:mo},{path:"/recipes",name:"recipes",component:Sa},{path:"/food",name:"food",component:Tl},{path:"/shopping",name:"shopping",component:fo},{path:"/profile",name:"profile",component:go},{path:"/settings",name:"settings",component:yo}]});let pe=document.documentElement.lang||navigator.language;!pe&&navigator.languages!=null&&(pe=navigator.languages[0]);Ne.defaultLocale=pe;const Le=document.querySelector("meta[name='_csrf']"),wo=Le?Le.content:"",ko=function(){const a=document.documentElement.dataset.perm||1,t=65536,i=131072;function u(o){return(a&o)==o}return{canCreateFood:u(t),canEditFood:u(i)}}(),xo=function(){function a(t){return typeof t=="string"?t:"message"in t?t.message:te.global.t("err.err")}return{msg:function(t){let i={msg:a(t),timeout:3e3};window.dispatchEvent(new CustomEvent("message",{detail:i}))},warn:function(t){let i={msg:a(t),timeout:4e3};window.dispatchEvent(new CustomEvent("warning",{detail:i}))},err:function(t){let i={msg:a(t),timeout:5e3};window.dispatchEvent(new CustomEvent("error",{detail:i}))}}}(),J=Pe(Ct);let te,le,ue,ae,ce;function Co(a){te=Ve({legacy:!1,locale:pe.split("-")[0],fallbackLocale:"en",messages:a}),le&&ue&&ae&&ce&&ve()}function Lo(a){le=a,te&&ue&&ae&&ce&&ve()}function Io(a){ue=a,te&&le&&ae&&ce&&ve()}function So(a){ae={},a.forEach(t=>ae[t.date]=t),te&&le&&ue&&ce&&ve()}function Ie(a){ce=a,te&&le&&ue&&ae&&ve()}function ve(){le.forEach(a=>{a.name=te.global.t(a.id.toString())}),J.provide("csrfToken",wo),J.provide("perms",ko),J.provide("food",f(le)),J.provide("recipes",f(ue)),J.provide("diary",f(ae)),J.provide("prefs",f(ce)),J.provide("log",xo),J.use($o),J.use(te),J.mount("#app")}fetch("/app/l10n.json").then(a=>a.json()).then(Co);fetch("/api/v1/foods").then(a=>a.json()).then(Lo);fetch("/api/v1/recipes").then(a=>a.json()).then(Io);fetch("/api/v1/diary").then(a=>a.json()).then(So);fetch("/api/v1/prefs").then(a=>a.json()).then(Ie).catch(()=>{Ie({rdi:{kcal:2e3,fat:60,carb:270,prot:80}})});
