import{o as _,c as R,u as h,R as P,a as S,i as I,r as v,b as $,d as y,e as t,f as d,t as o,n as M,g as C,w as k,v as b,h as f,j as T,k as V,F as H,l as z,m as F,p as D,q as O,s as U,x as N}from"./vendor.js";const B=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function i(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(e){if(e.ep)return;e.ep=!0;const n=i(e);fetch(e.href,n)}};B();const E={setup(u){return(s,i)=>(_(),R(h(P)))}},j={id:"app-name"},q=t("input",{type:"password",name:"pass"},null,-1),A=["value"],X=f("."),K={setup(u){const{t:s}=S(),i=/^[^@]+@[^@]+$/,a=I("csrfToken"),e=v(""),n=v({msg:"",level:""});function c(l){if(l.preventDefault(),n.value={},e.value.search(i)==-1)return n.value={msg:s("login.errmail"),level:"err"},!1;fetch("/auth/local",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":a},body:new URLSearchParams(new FormData(l.target.closest("form")))}).then(m=>{m.ok?window.location="/app":n.value={msg:s("login.err"+m.status),level:"err"}})}return(l,m)=>{const r=$("HeaderImage"),p=$("Message");return _(),y(H,null,[t("header",null,[d(r,{id:"logo"}),t("div",j,[t("span",null,o(l.$t("login.title1")),1),t("span",null,o(l.$t("login.title2")),1)])]),t("form",null,[d(p,M(C(n.value)),null,16),t("label",null,o(l.$t("form.email")),1),k(t("input",{type:"email",name:"email","onUpdate:modelValue":m[0]||(m[0]=g=>e.value=g)},null,512),[[b,e.value]]),t("label",null,[f(o(l.$t("form.pass"))+" ",1),d(h(T),{to:"/reset"},{default:V(()=>[f(o(l.$t("form.reset")),1)]),_:1})]),q,t("input",{type:"submit",value:l.$t("login.action"),onClick:c},null,8,A),t("footer",null,[t("span",null,[f(o(l.$t("login.signup"))+" ",1),d(h(T),{to:"/signup"},{default:V(()=>[f(o(l.$t("register.action")),1)]),_:1}),X])])])],64)}}},W=["value"],G={props:["modelValue"],emits:["update:modelValue"],setup(u,{emit:s}){function i(e){const n=e.target.value;s("update:modelValue",n),a(n)}function a(e){let n=zxcvbn(e).score;console.log(n)}return(e,n)=>(_(),y("input",{type:"password",value:u.modelValue,onInput:i},null,40,W))}},J={id:"app-name"},Q=["innerHTML"],Y=["value"],Z=f("."),x={setup(u){const{t:s}=S(),i=/^[^@]+@[^@]+$/,a=I("csrfToken"),e=v(""),n=v(""),c=v(""),l=v({msg:"",level:""});function m(r){if(r.preventDefault(),e.value.search(i)==-1)return l.value={msg:s("login.errmail"),level:"err"},!1;if(n.value==""||c.value=="")return l.value={msg:s("register.errpassempty"),level:"err"},!1;if(n.value!=c.value){l.value={msg:s("register.errpassmatch"),level:"err"};return}let p=e.value;fetch("/api/v1/user",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":a},body:new URLSearchParams(new FormData(r.target.closest("form")))}).then(g=>{g.ok?l.value={msg:s("register.success",{addr:p})}:l.value={msg:s("register.err"+g.status),level:"err"}})}return(r,p)=>{const g=$("HeaderImage"),L=$("Message");return _(),y(H,null,[t("header",null,[d(g,{id:"logo"}),t("div",J,[t("span",null,o(r.$t("register.title1")),1),t("span",null,o(r.$t("register.title2")),1)])]),t("form",null,[d(L,M(C(l.value)),null,16),t("p",{innerHTML:r.$t("register.hint")},null,8,Q),t("label",null,o(r.$t("form.email")),1),k(t("input",{type:"email",name:"email","onUpdate:modelValue":p[0]||(p[0]=w=>e.value=w)},null,512),[[b,e.value]]),t("label",null,o(r.$t("form.pass")),1),d(G,{name:"pass",modelValue:n.value,"onUpdate:modelValue":p[1]||(p[1]=w=>n.value=w)},null,8,["modelValue"]),t("label",null,o(r.$t("form.confirm")),1),k(t("input",{type:"password",name:"pass","onUpdate:modelValue":p[2]||(p[2]=w=>c.value=w)},null,512),[[b,c.value]]),t("input",{type:"submit",value:r.$t("register.action"),onClick:m},null,8,Y),t("footer",null,[t("span",null,[f(o(r.$t("register.signin"))+" ",1),d(h(T),{to:"/"},{default:V(()=>[f(o(r.$t("login.action")),1)]),_:1}),Z])])])],64)}}};const ee={id:"app-name"},te=["value"],ne={setup(u){const{t:s}=S(),i=/^[^@]+@[^@]+$/,a=I("csrfToken"),e=v(""),n=v({msg:"",level:""});function c(l){if(l.preventDefault(),n.value={},e.value.search(i)==-1)return n.value={msg:s("login.errmail"),level:"err"},!1;let m=e.value;fetch("/auth/reset",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":a},body:new URLSearchParams(new FormData(l.target.closest("form")))}).then(r=>{r.ok?n.value={msg:s("reset.success",{addr:m})}:n.value={msg:s("reset.err"+r.status),level:"err"}})}return(l,m)=>{const r=$("HeaderImage"),p=$("Message");return _(),y(H,null,[d(h(T),{to:"/",class:"back"},{default:V(()=>[f("\u1438 "+o(l.$t("form.back")),1)]),_:1}),t("header",null,[d(r,{id:"logo"}),t("div",ee,[t("span",null,o(l.$t("reset.title1")),1),t("span",null,o(l.$t("reset.title2")),1)])]),t("form",null,[d(p,M(C(n.value)),null,16),t("p",null,o(l.$t("reset.hint")),1),t("label",null,o(l.$t("form.email")),1),k(t("input",{type:"email",name:"email","onUpdate:modelValue":m[0]||(m[0]=g=>e.value=g)},null,512),[[b,e.value]]),t("input",{type:"submit",value:l.$t("reset.action"),onClick:c},null,8,te)])],64)}}},le=z({history:F(),routes:[{path:"/",name:"login",component:K},{path:"/signup",name:"signup",component:x},{path:"/reset",name:"reset",component:ne}]});const se={props:{msg:String,level:Number},setup(u){const s=u,i=D(()=>s.msg);return(a,e)=>(_(),y("div",{class:O(["message",[{hidden:!h(i)},u.level]])},o(u.msg),3))}};var ae=(u,s)=>{const i=u.__vccOpts||u;for(const[a,e]of s)i[a]=e;return i};const oe={},re={width:"512",height:"512",version:"1.1",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},ue=t("path",{d:"m251.2 4.007c-17.24-0.2277-34.69 4.924-50.29 15.67-14.33 9.866-26.9 26.43-33.11 43.62-1.357 3.754-2.073 4.828-2.992 4.475-10.97-4.217-29-5.131-40.42-2.049-23.57 6.359-41.5 24.22-48.52 48.31-2.553 8.761-3.407 21.84-1.997 30.6 0.5299 3.293 0.7902 6.162 0.5799 6.372-0.2104 0.2108-2.439 0.9186-4.956 1.572-16.5 4.283-34.28 18.21-43.89 34.41-8.382 14.11-11.91 27.14-11.93 44-0.02401 23.88 7.433 42.79 23.41 59.36 14.31 14.85 32.89 22.84 52.49 22.56 4.95-0.0689 10.41-0.4681 12.13-0.8863 2.9-0.7045 3.245-0.6061 4.695 1.334 8.833 11.82 16.82 18.58 29.19 24.7 6.707 3.32 9.412 5.257 16.09 11.53 24.85 23.35 47.68 40.8 76.05 58.12 9.503 5.8 18.01 13.61 20.54 18.86 3.313 6.878 3.637 11.06 1.825 23.56-2.778 19.18-7.936 38.33-13.13 48.74l-2.639 5.295h-13.49c-16.17-3e-3 -92.41 2.205-106.2 3.077l0.01-3e-3c-5.381 0.3399 64.84 0.6684 156 0.7315 91.2 0.0625 165.7-0.0216 165.5-0.1878-0.4753-0.4399-58.86-2.155-93-2.731l-29.4-0.4942-2.89-4.313c-8.274-12.35-13.68-36.12-16.33-71.76-2.105-28.31 1.454-40.62 14.72-50.94 11.18-8.699 30.14-20.92 48.72-31.39 7.533-4.248 14.57-8.318 15.65-9.048 1.076-0.7296 3.366-1.779 5.087-2.33 7.71-2.467 21.34-10.26 28.3-16.17 3.662-3.113 4.427-3.435 8.218-3.446 8.183-0.0267 21.12-3.59 31.28-8.613 21.39-10.58 38.52-30.56 46.38-54.11 10.84-32.47 5.42-66.98-14.68-93.52l-5.364-7.084 0.916-4.395c1.646-7.896 1.904-21.74 0.5502-29.5-5.632-32.29-26.9-56.92-56-64.86-4.726-1.29-8.51-1.647-18.49-1.74l-12.55-0.1186-5.101-3.647c-13.67-9.776-29.15-14.43-45.31-13.64-4.95 0.2432-11.26 0.9944-14.02 1.671l-5.028 1.229-5.539-5.72c-17.07-17.63-38.89-26.81-61.05-27.1zm2.728 163.7c0.2008-0.0398-0.0367 0.1881 0.1154 1.137 0.6972 4.35 3.151 22.06 5.4 33.64 0.0118 0.0694 0.0228 0.138 0.0328 0.2076 0.1506-2e-3 0.2799 9e-5 0.4349-3e-3 2.448-0.0501 6.427-1.143 11.14-2.27 8.028-1.922 18.18-3.94 26.46-1.035 7.379 2.587 13.28 9.078 14.9 23.01 1.268 10.94 0.6106 21.03-1.407 30-2.301 10.23-6.37 19.01-11.35 25.91-5.045 6.991-11.03 12.07-17.07 14.81-14.87 6.743-21.44-1.818-28.16-2.152-3.88-0.1922-11.12 4.224-19.58 4.409-6.437 0.1402-13.58-2.169-20.49-10.82-6.596-8.262-11.39-20.2-13.74-32.65-2.402-12.73-2.24-26 1.189-36.39 4.29-13 13.69-21.51 29.58-18.88 16.41 2.714 16.78 5.532 24.81 6-1.993-25.18-10.56-34.43-6.936-34.4 3.453 0.0238 4.434-0.4726 4.692-0.5239zm45.16 159.1 6.55 3.542c3.603 1.947 9.529 4.401 13.17 5.45 3.641 1.049 6.753 2.307 6.916 2.797 0.4733 1.423-4.232 10.83-8.214 16.42-4.588 6.442-12.05 13.85-15.96 15.86-3.919 2.004-4.971 1.93-6.867-0.4843-1.372-1.748-1.532-2.86-1.229-8.432 0.1916-3.529 0.558-11.94 0.8171-18.7 0.4657-12.13 0.4983-12.3 2.646-14.37zm35.38 12.77 8.817 0.4448c4.849 0.245 8.919 0.5294 9.045 0.6326 0.3835 0.315-13.58 11.27-19.07 14.96-4.795 3.222-8.322 4.307-9.229 2.837-0.6151-0.9971 2.187-6.619 6.471-12.98zm-166.7 4.596c7.489 0 9.391 0.219 9.391 1.087 0 2.234 4.067 15.16 6.257 19.89 1.248 2.694 2.123 4.9 1.947 4.9-1.66 0-26.99-23.83-26.99-25.39 0-0.2685 4.226-0.4876 9.391-0.4876zm16.13 1.727c0.0388-0.0118 0.0851-6e-3 0.1417 0.0231 9.674 5.087 20.32 9.107 27.58 10.41 2.293 0.4121 3.101 1.124 4.695 4.138 2.657 5.026 14.48 23 22.37 34.02 3.603 5.03 6.639 9.968 6.748 10.98 0.2897 2.671-2.108 2.658-7.285-0.0429-17.39-9.068-40.22-26.29-45.07-34.01-3.258-5.172-10.38-25.14-9.173-25.52zm67.9 9.71c0.263-9e-3 0.4337 9e-3 0.4876 0.0625 0.2159 0.2154 0.3921 6.837 0.3921 14.71 0 10.98-0.2506 14.62-1.074 15.62-1.615 1.956-3.397 1.59-6.909-1.423-4.068-3.49-7.665-9.13-10.4-16.3-3.912-10.28-4.082-9.686 2.985-10.28 3.355-0.2804 8.013-1.006 10.35-1.615 1.755-0.4562 3.373-0.7502 4.162-0.7776z",fill:"#13ad73"},null,-1),ie=[ue];function ce(u,s){return _(),y("svg",re,ie)}var me=ae(oe,[["render",ce]]);const pe=document.querySelector("meta[name='_csrf']").content;fetch("/login/l10n.json").then(u=>u.json()).then(u=>{let s=navigator.language;navigator.languages!=null&&(s=navigator.languages[0]);const i=U({locale:s.split("-")[0],fallbackLocale:"en",messages:u}),a=N(E);a.component("Message",se),a.component("HeaderImage",me),a.provide("csrfToken",pe),a.use(le),a.use(i),a.mount("#app")});
