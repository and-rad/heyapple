import{u as $,o as _,c as h,a as t,t as l,b as n,d,R as U,F as T,r as O,e as v,n as N,f as z,g as P,i as V,h as b,j as F,k as M,w as H,v as I,l as w,m as k,p as x,q as E,s as D,x as X,y as j,z as A,A as q,B as K,C as W}from"./vendor.js";const G=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function m(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=m(a);fetch(a.href,s)}};G();const J={href:"/terms",target:"_blank"},Q={href:"/legal",target:"_blank"},Y={href:"/privacy",target:"_blank"},Z={setup(r){const{t:e}=$();return(m,o)=>(_(),h("footer",null,[t("nav",null,[t("span",null,l(n(e)("foot.copy")),1),t("a",J,l(n(e)("foot.terms")),1),t("a",Q,l(n(e)("foot.legal")),1),t("a",Y,l(n(e)("foot.privacy")),1)])]))}};const ee={setup(r){return(e,m)=>(_(),h(T,null,[t("div",null,[t("main",null,[d(n(U))])]),d(Z)],64))}};var R=(r,e)=>{const m=r.__vccOpts||r;for(const[o,a]of e)m[o]=a;return m};const te={},ne={version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ae=t("path",{d:"m12 6c4.1345 0 7.8218 2.3236 9.6218 6-1.8 3.6764-5.4873 6-9.6218 6-4.1345 0-7.8218-2.3236-9.6218-6 1.8-3.6764 5.4873-6 9.6218-6m0-2.1818c-5.4545 0-10.113 3.3927-12 8.1818 1.8873 4.7891 6.5455 8.1818 12 8.1818 5.4545 0 10.113-3.3927 12-8.1818-1.8873-4.7891-6.5455-8.1818-12-8.1818zm0 5.4545c1.5055 0 2.7273 1.2218 2.7273 2.7273 0 1.5055-1.2218 2.7273-2.7273 2.7273-1.5055 0-2.7273-1.2218-2.7273-2.7273 0-1.5055 1.2218-2.7273 2.7273-2.7273m0-2.1818c-2.7055 0-4.9091 2.2036-4.9091 4.9091 0 2.7055 2.2036 4.9091 4.9091 4.9091 2.7055 0 4.9091-2.2036 4.9091-4.9091 0-2.7055-2.2036-4.9091-4.9091-4.9091z"},null,-1),se=[ae];function le(r,e){return _(),h("svg",ne,se)}var oe=R(te,[["render",le]]);const re={},ce={version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ie=t("path",{d:"m12 5.4273c4.1345 0 7.8218 2.3236 9.6218 6-0.64364 1.3309-1.5491 2.4764-2.6291 3.4036l1.5382 1.5382c1.5164-1.3418 2.7164-3.0218 3.4691-4.9418-1.8873-4.7891-6.5455-8.1818-12-8.1818-1.3855 0-2.7164 0.21818-3.9709 0.62182l1.8 1.8c0.70909-0.14182 1.4291-0.24 2.1709-0.24zm-1.1673 1.2436 2.2582 2.2582c0.62182 0.27273 1.1236 0.77455 1.3964 1.3964l2.2582 2.2582c0.08727-0.37091 0.15273-0.76364 0.15273-1.1673 0.010909-2.7055-2.1927-4.8982-4.8982-4.8982-0.40364 0-0.78545 0.054546-1.1673 0.15273zm-9.7309-3.5673 2.9236 2.9236c-1.7782 1.3964-3.1855 3.2509-4.0255 5.4 1.8873 4.7891 6.5455 8.1818 12 8.1818 1.6582 0 3.2509-0.31636 4.7127-0.89455l3.7309 3.7309 1.5382-1.5382-19.342-19.353zm8.1818 8.1818 2.8473 2.8473c-0.04364 0.01091-0.08727 0.02182-0.13091 0.02182-1.5055 0-2.7273-1.2218-2.7273-2.7273 0-0.05455 0.01091-0.08727 0.01091-0.14182zm-3.7091-3.7091 1.9091 1.9091c-0.25091 0.6-0.39273 1.2545-0.39273 1.9418 0 2.7055 2.2036 4.9091 4.9091 4.9091 0.68727 0 1.3418-0.14182 1.9309-0.39273l1.0691 1.0691c-0.96 0.26182-1.9636 0.41454-3 0.41454-4.1345 0-7.8218-2.3236-9.6218-6 0.76364-1.56 1.8764-2.8473 3.1964-3.8509z"},null,-1),ue=[ie];function me(r,e){return _(),h("svg",ce,ue)}var de=R(re,[["render",me]]);const pe={class:"password"},fe=["type","name","value"],L={props:["modelValue","name","withBar"],emits:["update:modelValue"],setup(r,{expose:e,emit:m}){const o=r,a=["#e53935","#FB8C00","#FDD835","#7CB342","#00897B"],s=O({width:"0",background:"transparent"}),i=v("password");function u(y){o.modelValue=y.target.value,m("update:modelValue",o.modelValue),c(o.modelValue)}function c(y){let C=zxcvbn(y).score;s.width=y.length>0?20+C*20+"%":"0%",s.background=a[C]}function f(){i.value=i.value=="password"?"text":"password"}function p(){i.value="password"}function g(){i.value="text"}return e({hide:p,show:g}),(y,C)=>(_(),h("span",pe,[t("input",{type:i.value,name:r.name,value:r.modelValue,onInput:u},null,40,fe),r.withBar?(_(),h("div",{key:0,class:"strength-bar",style:N(n(s))},null,4)):z("",!0),t("button",{class:"visibility icon",type:"button",onClick:f},[i.value=="password"?(_(),P(oe,{key:0})):z("",!0),i.value=="text"?(_(),P(de,{key:1})):z("",!0)])]))}},_e={id:"app-name"},ge=w("."),ve={setup(r){const{t:e}=$(),m=/^[^@]+@[^@]+$/,o=V("csrfToken"),a=v(""),s=v({msg:"",level:""});function i(u){if(u.preventDefault(),a.value.search(m)==-1)return s.value={msg:e("login.errmail"),level:"err"},!1;u.target.disabled=!0,fetch("/auth/local",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":o},body:new URLSearchParams(new FormData(u.target.closest("form")))}).then(c=>{c.ok?window.location="/app":(s.value={msg:e("login.err"+c.status),level:"err"},u.target.disabled=!1)})}return(u,c)=>{const f=b("HeaderImage"),p=b("Message");return _(),h(T,null,[t("header",null,[d(f,{id:"logo"}),t("div",_e,[t("span",null,l(n(e)("login.title1")),1),t("span",null,l(n(e)("login.title2")),1)])]),t("form",null,[d(p,F(M(s.value)),null,16),t("label",null,l(n(e)("form.email")),1),H(t("input",{type:"email",name:"email","onUpdate:modelValue":c[0]||(c[0]=g=>a.value=g)},null,512),[[I,a.value]]),t("label",null,[w(l(n(e)("form.pass"))+" ",1),d(n(k),{to:"/reset",tabindex:"-1"},{default:x(()=>[w(l(n(e)("form.reset")),1)]),_:1})]),d(L,{name:"pass"}),t("button",{type:"submit",onClick:i,class:"async"},l(n(e)("login.action")),1),t("p",null,[w(l(n(e)("login.signup"))+" ",1),d(n(k),{to:"/signup"},{default:x(()=>[w(l(n(e)("register.action")),1)]),_:1}),ge])])],64)}}},he={id:"app-name"},ye=["innerHTML"],we=w("."),be={setup(r){const{t:e}=$(),m=/^[^@]+@[^@]+$/,o=V("csrfToken"),a=v(""),s=v(""),i=v(null),u=v({msg:"",level:""});function c(p){if(p.preventDefault(),i.value.hide(),a.value.search(m)==-1)return u.value={msg:e("login.errmail"),level:"err"},!1;if(s.value=="")return u.value={msg:e("register.errpassempty"),level:"err"},!1;let g=a.value;p.target.disabled=!0,fetch("/api/v1/user",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":o},body:new URLSearchParams(new FormData(p.target.closest("form")))}).then(y=>{y.ok?(u.value={msg:e("register.success",{addr:g})},f(p)):(u.value={msg:e("register.err"+y.status),level:"err"},p.target.disabled=!1)})}function f(p){p.target.disabled=!1,a.value="",s.value=""}return(p,g)=>{const y=b("HeaderImage"),C=b("Message");return _(),h(T,null,[t("header",null,[d(y,{id:"logo"}),t("div",he,[t("span",null,l(n(e)("register.title1")),1),t("span",null,l(n(e)("register.title2")),1)])]),t("form",null,[t("p",{innerHTML:n(e)("register.hint")},null,8,ye),d(C,F(M(u.value)),null,16),t("label",null,l(n(e)("form.email")),1),H(t("input",{type:"email",name:"email","onUpdate:modelValue":g[0]||(g[0]=S=>a.value=S)},null,512),[[I,a.value]]),t("label",null,l(n(e)("form.pass")),1),d(L,{ref_key:"passField",ref:i,name:"pass",withBar:"true",modelValue:s.value,"onUpdate:modelValue":g[1]||(g[1]=S=>s.value=S)},null,8,["modelValue"]),t("button",{type:"submit",onClick:c,class:"async"},l(n(e)("register.action")),1),t("p",null,[w(l(n(e)("register.signin"))+" ",1),d(n(k),{to:"/"},{default:x(()=>[w(l(n(e)("login.action")),1)]),_:1}),we])])],64)}}};const ke={id:"app-name"},xe={setup(r){const{t:e}=$(),m=/^[^@]+@[^@]+$/,o=V("csrfToken"),a=v(""),s=v({msg:"",level:""});function i(c){if(c.preventDefault(),a.value.search(m)==-1)return s.value={msg:e("login.errmail"),level:"err"},!1;let f=a.value;c.target.disabled=!0,fetch("/auth/reset",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":o},body:new URLSearchParams(new FormData(c.target.closest("form")))}).then(p=>{p.ok?(s.value={msg:e("reset.success",{addr:f})},u(c)):(s.value={msg:e("reset.err"+p.status),level:"err"},c.target.disabled=!1)})}function u(c){c.target.disabled=!1,a.value=""}return(c,f)=>{const p=b("HeaderImage"),g=b("Message");return _(),h(T,null,[d(n(k),{to:"/",class:"back"},{default:x(()=>[w("\u1438 "+l(n(e)("form.back")),1)]),_:1}),t("header",null,[d(p,{id:"logo"}),t("div",ke,[t("span",null,l(n(e)("reset.title1")),1),t("span",null,l(n(e)("reset.title2")),1)])]),t("form",null,[t("p",null,l(n(e)("reset.hint")),1),d(g,F(M(s.value)),null,16),t("label",null,l(n(e)("form.email")),1),H(t("input",{type:"email",name:"email","onUpdate:modelValue":f[0]||(f[0]=y=>a.value=y)},null,512),[[I,a.value]]),t("button",{type:"submit",onClick:i,class:"async"},l(n(e)("reset.action")),1)])],64)}}},$e={id:"app-name"},Te={setup(r){const{t:e}=$(),m=V("csrfToken"),o=v({msg:"",level:""});function a(s){fetch("/auth/confirm",{method:"PUT",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":m},body:new URLSearchParams({token:s})}).then(i=>{i.ok?o.value={msg:e("confirm.success")}:o.value={msg:e("confirm.err"+i.status),level:"err"}})}return E(()=>{a(D().params.token)}),(s,i)=>{const u=b("HeaderImage"),c=b("Message");return _(),h(T,null,[t("header",null,[d(u,{id:"logo"}),t("div",$e,[t("span",null,l(n(e)("confirm.title1")),1),t("span",null,l(n(e)("confirm.title2")),1)])]),d(c,F(M(o.value)),null,16),d(n(k),{to:"/"},{default:x(()=>[w(l(n(e)("confirm.return")),1)]),_:1})],64)}}},Ce={id:"app-name"},Ve=["innerHTML"],Fe=["value"],Me={setup(r){const{t:e}=$(),m=V("csrfToken"),o=v(""),a=v({msg:"",level:""}),s=v(null);function i(u){if(u.preventDefault(),s.value.hide(),o.value=="")return a.value={msg:e("register.errpassempty"),level:"err"},!1;let c=u.target.closest("form");u.target.disabled=!0,fetch("/auth/reset",{method:"PUT",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":m},body:new URLSearchParams(new FormData(c))}).then(f=>{f.ok?a.value={msg:e("resetconf.success")}:a.value={msg:e("resetconf.err"+f.status),level:"err"}}).catch(()=>a.value={msg:e("err.conn"),level:"err"}).finally(()=>u.target.disabled=!1)}return(u,c)=>{const f=b("HeaderImage"),p=b("Message");return _(),h(T,null,[t("header",null,[d(f,{id:"logo"}),t("div",Ce,[t("span",null,l(n(e)("reset.title1")),1),t("span",null,l(n(e)("reset.title2")),1)])]),t("form",null,[t("p",{innerHTML:n(e)("resetconf.hint")},null,8,Ve),d(p,F(M(a.value)),null,16),t("label",null,l(n(e)("form.pass")),1),d(L,{ref_key:"passField",ref:s,name:"pass",withBar:"true",modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=g=>o.value=g)},null,8,["modelValue"]),t("input",{type:"hidden",name:"token",value:n(D)().params.token},null,8,Fe),t("button",{type:"submit",onClick:i,class:"async"},l(n(e)("resetconf.action")),1),t("p",null,[d(n(k),{to:"/"},{default:x(()=>[w(l(n(e)("confirm.return")),1)]),_:1})])])],64)}}},Se=X({history:j(),routes:[{path:"/",name:"login",component:ve},{path:"/signup",name:"signup",component:be},{path:"/confirm/:token",name:"confirm",component:Te},{path:"/reset",name:"reset",component:xe},{path:"/reset/:token",name:"resetconfirm",component:Me},{path:"/:pathmatch(.*)",redirect:"/"}]});const ze={props:{msg:String,level:String},setup(r){const e=r,m=A(()=>e.msg);return(o,a)=>(_(),h("div",{class:q(["message",[{hidden:!n(m)},r.level]])},l(r.msg),3))}},He={},Ie={width:"512",height:"512",version:"1.1",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},Re=t("path",{d:"m251.2 4.007c-17.24-0.2277-34.69 4.924-50.29 15.67-14.33 9.866-26.9 26.43-33.11 43.62-1.357 3.754-2.073 4.828-2.992 4.475-10.97-4.217-29-5.131-40.42-2.049-23.57 6.359-41.5 24.22-48.52 48.31-2.553 8.761-3.407 21.84-1.997 30.6 0.5299 3.293 0.7902 6.162 0.5799 6.372-0.2104 0.2108-2.439 0.9186-4.956 1.572-16.5 4.283-34.28 18.21-43.89 34.41-8.382 14.11-11.91 27.14-11.93 44-0.02401 23.88 7.433 42.79 23.41 59.36 14.31 14.85 32.89 22.84 52.49 22.56 4.95-0.0689 10.41-0.4681 12.13-0.8863 2.9-0.7045 3.245-0.6061 4.695 1.334 8.833 11.82 16.82 18.58 29.19 24.7 6.707 3.32 9.412 5.257 16.09 11.53 24.85 23.35 47.68 40.8 76.05 58.12 9.503 5.8 18.01 13.61 20.54 18.86 3.313 6.878 3.637 11.06 1.825 23.56-2.778 19.18-7.936 38.33-13.13 48.74l-2.639 5.295h-13.49c-16.17-3e-3 -92.41 2.205-106.2 3.077l0.01-3e-3c-5.381 0.3399 64.84 0.6684 156 0.7315 91.2 0.0625 165.7-0.0216 165.5-0.1878-0.4753-0.4399-58.86-2.155-93-2.731l-29.4-0.4942-2.89-4.313c-8.274-12.35-13.68-36.12-16.33-71.76-2.105-28.31 1.454-40.62 14.72-50.94 11.18-8.699 30.14-20.92 48.72-31.39 7.533-4.248 14.57-8.318 15.65-9.048 1.076-0.7296 3.366-1.779 5.087-2.33 7.71-2.467 21.34-10.26 28.3-16.17 3.662-3.113 4.427-3.435 8.218-3.446 8.183-0.0267 21.12-3.59 31.28-8.613 21.39-10.58 38.52-30.56 46.38-54.11 10.84-32.47 5.42-66.98-14.68-93.52l-5.364-7.084 0.916-4.395c1.646-7.896 1.904-21.74 0.5502-29.5-5.632-32.29-26.9-56.92-56-64.86-4.726-1.29-8.51-1.647-18.49-1.74l-12.55-0.1186-5.101-3.647c-13.67-9.776-29.15-14.43-45.31-13.64-4.95 0.2432-11.26 0.9944-14.02 1.671l-5.028 1.229-5.539-5.72c-17.07-17.63-38.89-26.81-61.05-27.1zm2.728 163.7c0.2008-0.0398-0.0367 0.1881 0.1154 1.137 0.6972 4.35 3.151 22.06 5.4 33.64 0.0118 0.0694 0.0228 0.138 0.0328 0.2076 0.1506-2e-3 0.2799 9e-5 0.4349-3e-3 2.448-0.0501 6.427-1.143 11.14-2.27 8.028-1.922 18.18-3.94 26.46-1.035 7.379 2.587 13.28 9.078 14.9 23.01 1.268 10.94 0.6106 21.03-1.407 30-2.301 10.23-6.37 19.01-11.35 25.91-5.045 6.991-11.03 12.07-17.07 14.81-14.87 6.743-21.44-1.818-28.16-2.152-3.88-0.1922-11.12 4.224-19.58 4.409-6.437 0.1402-13.58-2.169-20.49-10.82-6.596-8.262-11.39-20.2-13.74-32.65-2.402-12.73-2.24-26 1.189-36.39 4.29-13 13.69-21.51 29.58-18.88 16.41 2.714 16.78 5.532 24.81 6-1.993-25.18-10.56-34.43-6.936-34.4 3.453 0.0238 4.434-0.4726 4.692-0.5239zm45.16 159.1 6.55 3.542c3.603 1.947 9.529 4.401 13.17 5.45 3.641 1.049 6.753 2.307 6.916 2.797 0.4733 1.423-4.232 10.83-8.214 16.42-4.588 6.442-12.05 13.85-15.96 15.86-3.919 2.004-4.971 1.93-6.867-0.4843-1.372-1.748-1.532-2.86-1.229-8.432 0.1916-3.529 0.558-11.94 0.8171-18.7 0.4657-12.13 0.4983-12.3 2.646-14.37zm35.38 12.77 8.817 0.4448c4.849 0.245 8.919 0.5294 9.045 0.6326 0.3835 0.315-13.58 11.27-19.07 14.96-4.795 3.222-8.322 4.307-9.229 2.837-0.6151-0.9971 2.187-6.619 6.471-12.98zm-166.7 4.596c7.489 0 9.391 0.219 9.391 1.087 0 2.234 4.067 15.16 6.257 19.89 1.248 2.694 2.123 4.9 1.947 4.9-1.66 0-26.99-23.83-26.99-25.39 0-0.2685 4.226-0.4876 9.391-0.4876zm16.13 1.727c0.0388-0.0118 0.0851-6e-3 0.1417 0.0231 9.674 5.087 20.32 9.107 27.58 10.41 2.293 0.4121 3.101 1.124 4.695 4.138 2.657 5.026 14.48 23 22.37 34.02 3.603 5.03 6.639 9.968 6.748 10.98 0.2897 2.671-2.108 2.658-7.285-0.0429-17.39-9.068-40.22-26.29-45.07-34.01-3.258-5.172-10.38-25.14-9.173-25.52zm67.9 9.71c0.263-9e-3 0.4337 9e-3 0.4876 0.0625 0.2159 0.2154 0.3921 6.837 0.3921 14.71 0 10.98-0.2506 14.62-1.074 15.62-1.615 1.956-3.397 1.59-6.909-1.423-4.068-3.49-7.665-9.13-10.4-16.3-3.912-10.28-4.082-9.686 2.985-10.28 3.355-0.2804 8.013-1.006 10.35-1.615 1.755-0.4562 3.373-0.7502 4.162-0.7776z",fill:"#13ad73"},null,-1),Le=[Re];function Pe(r,e){return _(),h("svg",Ie,Le)}var Be=R(He,[["render",Pe]]);const B=document.querySelector("meta[name='_csrf']"),De=B?B.content:"";fetch("/login/l10n.json").then(r=>r.json()).then(r=>{let e=navigator.language;navigator.languages!=null&&(e=navigator.languages[0]);const m=K({legacy:!1,locale:e,fallbackLocale:"en",messages:r}),o=W(ee);o.component("Message",ze),o.component("HeaderImage",Be),o.provide("csrfToken",De),o.use(Se),o.use(m),o.mount("#app")});
