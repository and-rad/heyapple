import{u as T,o as _,c as v,a as t,t as s,b as n,d as p,R as P,F as V,r as R,n as B,e as D,i as C,f as y,g as w,h as F,j as M,w as I,v as z,k as f,l as x,m as $,p as O,q as U,s as N,x as E,y as j,z as q}from"./vendor.js";const A=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function i(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerpolicy&&(l.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?l.credentials="include":a.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=i(a);fetch(a.href,l)}};A();const X={href:"/terms",target:"_blank"},K={href:"/legal",target:"_blank"},W={href:"/privacy",target:"_blank"},G={setup(o){const{t:e}=T();return(i,r)=>(_(),v("footer",null,[t("nav",null,[t("span",null,s(n(e)("foot.copy")),1),t("a",X,s(n(e)("foot.terms")),1),t("a",K,s(n(e)("foot.legal")),1),t("a",W,s(n(e)("foot.privacy")),1)])]))}};const J={setup(o){return(e,i)=>(_(),v(V,null,[t("div",null,[t("main",null,[p(n(P))])]),p(G)],64))}};const Q=["name","value"],S={props:["modelValue","name","withBar"],emits:["update:modelValue"],setup(o,{emit:e}){const i=["#e53935","#FB8C00","#FDD835","#7CB342","#00897B"],r=R({width:"0",background:"transparent"});function a(c){const u=c.target.value;e("update:modelValue",u),l(u)}function l(c){let u=zxcvbn(c).score;r.width=c.length>0?20+u*20+"%":"0%",r.background=i[u]}return(c,u)=>(_(),v("span",null,[t("input",{type:"password",name:o.name,value:o.modelValue,onInput:a},null,40,Q),o.withBar?(_(),v("div",{key:0,class:"password-strength-bar",style:B(n(r))},null,4)):D("",!0)]))}},Y={id:"app-name"},Z=f("."),ee={setup(o){const{t:e}=T(),i=/^[^@]+@[^@]+$/,r=C("csrfToken"),a=y(""),l=y({msg:"",level:""});function c(u){if(u.preventDefault(),a.value.search(i)==-1)return l.value={msg:e("login.errmail"),level:"err"},!1;u.target.disabled=!0,fetch("/auth/local",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":r},body:new URLSearchParams(new FormData(u.target.closest("form")))}).then(m=>{m.ok?window.location="/app":(l.value={msg:e("login.err"+m.status),level:"err"},u.target.disabled=!1)})}return(u,m)=>{const h=w("HeaderImage"),d=w("Message");return _(),v(V,null,[t("header",null,[p(h,{id:"logo"}),t("div",Y,[t("span",null,s(n(e)("login.title1")),1),t("span",null,s(n(e)("login.title2")),1)])]),t("form",null,[p(d,F(M(l.value)),null,16),t("label",null,s(n(e)("form.email")),1),I(t("input",{type:"email",name:"email","onUpdate:modelValue":m[0]||(m[0]=g=>a.value=g)},null,512),[[z,a.value]]),t("label",null,[f(s(n(e)("form.pass"))+" ",1),p(n(x),{to:"/reset",tabindex:"-1"},{default:$(()=>[f(s(n(e)("form.reset")),1)]),_:1})]),p(S,{name:"pass"}),t("button",{type:"submit",onClick:c,class:"async"},s(n(e)("login.action")),1),t("p",null,[f(s(n(e)("login.signup"))+" ",1),p(n(x),{to:"/signup"},{default:$(()=>[f(s(n(e)("register.action")),1)]),_:1}),Z])])],64)}}},te={id:"app-name"},ae=["innerHTML"],ne=f("."),le={setup(o){const{t:e}=T(),i=/^[^@]+@[^@]+$/,r=C("csrfToken"),a=y(""),l=y(""),c=y(""),u=y({msg:"",level:""});function m(d){if(d.preventDefault(),a.value.search(i)==-1)return u.value={msg:e("login.errmail"),level:"err"},!1;if(l.value==""||c.value=="")return u.value={msg:e("register.errpassempty"),level:"err"},!1;if(l.value!=c.value){u.value={msg:e("register.errpassmatch"),level:"err"};return}let g=a.value;d.target.disabled=!0,fetch("/api/v1/user",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":r},body:new URLSearchParams(new FormData(d.target.closest("form")))}).then(b=>{b.ok?(u.value={msg:e("register.success",{addr:g})},h(d)):(u.value={msg:e("register.err"+b.status),level:"err"},d.target.disabled=!1)})}function h(d){d.target.disabled=!1,a.value="",l.value="",c.value=""}return(d,g)=>{const b=w("HeaderImage"),L=w("Message");return _(),v(V,null,[t("header",null,[p(b,{id:"logo"}),t("div",te,[t("span",null,s(n(e)("register.title1")),1),t("span",null,s(n(e)("register.title2")),1)])]),t("form",null,[t("p",{innerHTML:n(e)("register.hint")},null,8,ae),p(L,F(M(u.value)),null,16),t("label",null,s(n(e)("form.email")),1),I(t("input",{type:"email",name:"email","onUpdate:modelValue":g[0]||(g[0]=k=>a.value=k)},null,512),[[z,a.value]]),t("label",null,s(n(e)("form.pass")),1),p(S,{name:"pass",withBar:"true",modelValue:l.value,"onUpdate:modelValue":g[1]||(g[1]=k=>l.value=k)},null,8,["modelValue"]),t("label",null,s(n(e)("form.confirm")),1),p(S,{name:"pass",modelValue:c.value,"onUpdate:modelValue":g[2]||(g[2]=k=>c.value=k)},null,8,["modelValue"]),t("button",{type:"submit",onClick:m,class:"async"},s(n(e)("register.action")),1),t("p",null,[f(s(n(e)("register.signin"))+" ",1),p(n(x),{to:"/"},{default:$(()=>[f(s(n(e)("login.action")),1)]),_:1}),ne])])],64)}}};const se={id:"app-name"},re={setup(o){const{t:e}=T(),i=/^[^@]+@[^@]+$/,r=C("csrfToken"),a=y(""),l=y({msg:"",level:""});function c(m){if(m.preventDefault(),a.value.search(i)==-1)return l.value={msg:e("login.errmail"),level:"err"},!1;let h=a.value;m.target.disabled=!0,fetch("/auth/reset",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":r},body:new URLSearchParams(new FormData(m.target.closest("form")))}).then(d=>{d.ok?(l.value={msg:e("reset.success",{addr:h})},u(m)):(l.value={msg:e("reset.err"+d.status),level:"err"},m.target.disabled=!1)})}function u(m){m.target.disabled=!1,a.value=""}return(m,h)=>{const d=w("HeaderImage"),g=w("Message");return _(),v(V,null,[p(n(x),{to:"/",class:"back"},{default:$(()=>[f("\u1438 "+s(n(e)("form.back")),1)]),_:1}),t("header",null,[p(d,{id:"logo"}),t("div",se,[t("span",null,s(n(e)("reset.title1")),1),t("span",null,s(n(e)("reset.title2")),1)])]),t("form",null,[t("p",null,s(n(e)("reset.hint")),1),p(g,F(M(l.value)),null,16),t("label",null,s(n(e)("form.email")),1),I(t("input",{type:"email",name:"email","onUpdate:modelValue":h[0]||(h[0]=b=>a.value=b)},null,512),[[z,a.value]]),t("button",{type:"submit",onClick:c,class:"async"},s(n(e)("reset.action")),1)])],64)}}},oe=O({history:U(),routes:[{path:"/",name:"login",component:ee},{path:"/signup",name:"signup",component:le},{path:"/reset",name:"reset",component:re},{path:"/:pathmatch(.*)",redirect:"/"}]});const ue={props:{msg:String,level:String},setup(o){const e=o,i=N(()=>e.msg);return(r,a)=>(_(),v("div",{class:E(["message",[{hidden:!n(i)},o.level]])},s(o.msg),3))}};var ce=(o,e)=>{const i=o.__vccOpts||o;for(const[r,a]of e)i[r]=a;return i};const ie={},me={width:"512",height:"512",version:"1.1",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},de=t("path",{d:"m251.2 4.007c-17.24-0.2277-34.69 4.924-50.29 15.67-14.33 9.866-26.9 26.43-33.11 43.62-1.357 3.754-2.073 4.828-2.992 4.475-10.97-4.217-29-5.131-40.42-2.049-23.57 6.359-41.5 24.22-48.52 48.31-2.553 8.761-3.407 21.84-1.997 30.6 0.5299 3.293 0.7902 6.162 0.5799 6.372-0.2104 0.2108-2.439 0.9186-4.956 1.572-16.5 4.283-34.28 18.21-43.89 34.41-8.382 14.11-11.91 27.14-11.93 44-0.02401 23.88 7.433 42.79 23.41 59.36 14.31 14.85 32.89 22.84 52.49 22.56 4.95-0.0689 10.41-0.4681 12.13-0.8863 2.9-0.7045 3.245-0.6061 4.695 1.334 8.833 11.82 16.82 18.58 29.19 24.7 6.707 3.32 9.412 5.257 16.09 11.53 24.85 23.35 47.68 40.8 76.05 58.12 9.503 5.8 18.01 13.61 20.54 18.86 3.313 6.878 3.637 11.06 1.825 23.56-2.778 19.18-7.936 38.33-13.13 48.74l-2.639 5.295h-13.49c-16.17-3e-3 -92.41 2.205-106.2 3.077l0.01-3e-3c-5.381 0.3399 64.84 0.6684 156 0.7315 91.2 0.0625 165.7-0.0216 165.5-0.1878-0.4753-0.4399-58.86-2.155-93-2.731l-29.4-0.4942-2.89-4.313c-8.274-12.35-13.68-36.12-16.33-71.76-2.105-28.31 1.454-40.62 14.72-50.94 11.18-8.699 30.14-20.92 48.72-31.39 7.533-4.248 14.57-8.318 15.65-9.048 1.076-0.7296 3.366-1.779 5.087-2.33 7.71-2.467 21.34-10.26 28.3-16.17 3.662-3.113 4.427-3.435 8.218-3.446 8.183-0.0267 21.12-3.59 31.28-8.613 21.39-10.58 38.52-30.56 46.38-54.11 10.84-32.47 5.42-66.98-14.68-93.52l-5.364-7.084 0.916-4.395c1.646-7.896 1.904-21.74 0.5502-29.5-5.632-32.29-26.9-56.92-56-64.86-4.726-1.29-8.51-1.647-18.49-1.74l-12.55-0.1186-5.101-3.647c-13.67-9.776-29.15-14.43-45.31-13.64-4.95 0.2432-11.26 0.9944-14.02 1.671l-5.028 1.229-5.539-5.72c-17.07-17.63-38.89-26.81-61.05-27.1zm2.728 163.7c0.2008-0.0398-0.0367 0.1881 0.1154 1.137 0.6972 4.35 3.151 22.06 5.4 33.64 0.0118 0.0694 0.0228 0.138 0.0328 0.2076 0.1506-2e-3 0.2799 9e-5 0.4349-3e-3 2.448-0.0501 6.427-1.143 11.14-2.27 8.028-1.922 18.18-3.94 26.46-1.035 7.379 2.587 13.28 9.078 14.9 23.01 1.268 10.94 0.6106 21.03-1.407 30-2.301 10.23-6.37 19.01-11.35 25.91-5.045 6.991-11.03 12.07-17.07 14.81-14.87 6.743-21.44-1.818-28.16-2.152-3.88-0.1922-11.12 4.224-19.58 4.409-6.437 0.1402-13.58-2.169-20.49-10.82-6.596-8.262-11.39-20.2-13.74-32.65-2.402-12.73-2.24-26 1.189-36.39 4.29-13 13.69-21.51 29.58-18.88 16.41 2.714 16.78 5.532 24.81 6-1.993-25.18-10.56-34.43-6.936-34.4 3.453 0.0238 4.434-0.4726 4.692-0.5239zm45.16 159.1 6.55 3.542c3.603 1.947 9.529 4.401 13.17 5.45 3.641 1.049 6.753 2.307 6.916 2.797 0.4733 1.423-4.232 10.83-8.214 16.42-4.588 6.442-12.05 13.85-15.96 15.86-3.919 2.004-4.971 1.93-6.867-0.4843-1.372-1.748-1.532-2.86-1.229-8.432 0.1916-3.529 0.558-11.94 0.8171-18.7 0.4657-12.13 0.4983-12.3 2.646-14.37zm35.38 12.77 8.817 0.4448c4.849 0.245 8.919 0.5294 9.045 0.6326 0.3835 0.315-13.58 11.27-19.07 14.96-4.795 3.222-8.322 4.307-9.229 2.837-0.6151-0.9971 2.187-6.619 6.471-12.98zm-166.7 4.596c7.489 0 9.391 0.219 9.391 1.087 0 2.234 4.067 15.16 6.257 19.89 1.248 2.694 2.123 4.9 1.947 4.9-1.66 0-26.99-23.83-26.99-25.39 0-0.2685 4.226-0.4876 9.391-0.4876zm16.13 1.727c0.0388-0.0118 0.0851-6e-3 0.1417 0.0231 9.674 5.087 20.32 9.107 27.58 10.41 2.293 0.4121 3.101 1.124 4.695 4.138 2.657 5.026 14.48 23 22.37 34.02 3.603 5.03 6.639 9.968 6.748 10.98 0.2897 2.671-2.108 2.658-7.285-0.0429-17.39-9.068-40.22-26.29-45.07-34.01-3.258-5.172-10.38-25.14-9.173-25.52zm67.9 9.71c0.263-9e-3 0.4337 9e-3 0.4876 0.0625 0.2159 0.2154 0.3921 6.837 0.3921 14.71 0 10.98-0.2506 14.62-1.074 15.62-1.615 1.956-3.397 1.59-6.909-1.423-4.068-3.49-7.665-9.13-10.4-16.3-3.912-10.28-4.082-9.686 2.985-10.28 3.355-0.2804 8.013-1.006 10.35-1.615 1.755-0.4562 3.373-0.7502 4.162-0.7776z",fill:"#13ad73"},null,-1),pe=[de];function ge(o,e){return _(),v("svg",me,pe)}var fe=ce(ie,[["render",ge]]);const H=document.querySelector("meta[name='_csrf']"),_e=H?H.content:"";fetch("/login/l10n.json").then(o=>o.json()).then(o=>{let e=navigator.language;navigator.languages!=null&&(e=navigator.languages[0]);const i=j({legacy:!1,locale:e.split("-")[0],fallbackLocale:"en",messages:o}),r=q(J);r.component("Message",ue),r.component("HeaderImage",fe),r.provide("csrfToken",_e),r.use(oe),r.use(i),r.mount("#app")});
